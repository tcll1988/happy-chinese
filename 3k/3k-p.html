<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç¬¬3èª²ã€€æ–‡æ³•å­¦ç¿’</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://rsms.me/">
    <link rel="stylesheet" href="https://rsms.me/inter/inter.css">
    <style>
        /* Custom styles */
        body {
            /* Japanese Serif Font Stack (MS Mincho first) */
            font-family: 'MS Mincho', 'Hiragino Mincho ProN', 'Yu Mincho', serif;
            background-color: #f0f4f8; /* Light blue-gray background */
            -webkit-font-smoothing: antialiased; /* Smoother font rendering */
            -moz-osx-font-smoothing: grayscale;
        }
        /* Style for hidden sections */
        .grammar-section.hidden {
            display: none;
            opacity: 0;
        }
        /* Style for visible sections with fade-in */
        .grammar-section.visible {
            display: block;
            animation: fadeIn 0.5s ease-in-out forwards;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        /* Style for clickable sentences/items */
        .clickable-sentence, .clickable-item {
            cursor: pointer;
            color: #2563eb; /* Blue color */
            text-decoration: underline;
            transition: color 0.3s ease;
        }
        .clickable-sentence:hover, .clickable-item:hover {
            color: #1d4ed8; /* Darker blue on hover */
        }
        /* Basic button styling */
        .quiz-button, .nav-button { /* Added .nav-button */
            padding: 8px 16px;
            border-radius: 8px;
            color: white;
            border: none;
            cursor: pointer;
            transition: background-color 0.3s ease, transform 0.1s ease;
            font-weight: 500;
            margin-top: 10px;
            margin-right: 5px;
            font-family: inherit; /* Inherit body font (Japanese Serif) */
            text-decoration: none; /* Remove underline from link styled as button */
            display: inline-block; /* Ensure proper layout */
        }
        .quiz-button {
             background-color: #3b82f6; /* Blue button */
        }
        .quiz-button:hover {
            background-color: #2563eb;
        }
        .quiz-button:active, .nav-button:active {
             transform: scale(0.98); /* Slight shrink on click */
        }
        .quiz-button-secondary, .nav-button { /* Apply secondary style to nav button */
            background-color: #6b7280; /* Gray button */
        }
        .quiz-button-secondary:hover, .nav-button:hover {
            background-color: #4b5563;
        }
        /* Ensure radio/checkbox labels inherit font */
        label {
             font-family: inherit;
             line-height: 1.6; /* Improve spacing for radio buttons */
             display: inline-block; /* Ensure label aligns with radio */
             margin-left: 4px; /* Space between radio and label text */
        }
        /* Style radio buttons */
        input[type="radio"] {
             margin-right: 5px;
             vertical-align: middle; /* Align radio button with text */
        }
        /* Feedback styling */
        .feedback {
            margin-top: 10px;
            padding: 10px 12px;
            border-radius: 6px;
            font-weight: 500;
            border: 1px solid transparent;
            font-family: inherit; /* Ensure feedback uses Japanese Serif */
        }
        .feedback-correct {
            background-color: #dcfce7; /* Light green */
            color: #166534; /* Dark green */
            border-color: #86efac;
        }
        .feedback-incorrect {
            background-color: #fee2e2; /* Light red */
            color: #991b1b; /* Dark red */
            border-color: #fca5a5;
        }
        /* Add some animation to TOC items */
        #table-of-contents ul li a {
            transition: transform 0.2s ease, background-color 0.2s ease;
            display: block; /* Make the whole area clickable */
            padding: 12px 16px; /* Add padding */
            margin-bottom: 8px; /* Add space between items */
            background-color: #ffffff; /* White background */
            border-radius: 8px; /* Rounded corners */
            box-shadow: 0 2px 4px rgba(0,0,0,0.05); /* Subtle shadow */
            font-family: inherit; /* Ensure TOC uses Japanese Serif */
        }
        #table-of-contents ul li a:hover {
            transform: translateX(5px); /* Move slightly on hover */
            background-color: #eff6ff; /* Light blue background on hover */
        }
        /* Container styling */
        .container {
            max-width: 800px; /* Limit width on larger screens */
            margin: 20px auto; /* Center container */
            padding: 20px;
            background-color: #ffffff;
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            position: relative; /* Needed if using absolute positioning for back button */
        }
        /* Header styling */
        h1, h2, h3 {
            color: #1e3a8a; /* Dark blue header */
            font-family: inherit; /* Ensure headers use Japanese Serif */
        }
        h1 { /* Adjust h1 margin if back button is placed before it */
             margin-top: 0; /* Remove default top margin if needed */
        }
        h2 {
            border-bottom: 2px solid #93c5fd; /* Light blue underline */
            padding-bottom: 5px;
            margin-top: 20px;
            margin-bottom: 15px;
        }
        /* Explanation box styling */
        .explanation-box {
            background-color: #e0f2fe; /* Very light blue */
            border-left: 4px solid #3b82f6; /* Blue left border */
            padding: 15px;
            margin-bottom: 15px;
            border-radius: 8px;
        }
        .explanation-box h3 {
            font-weight: 600;
            color: #1e3a8a;
            margin-bottom: 8px;
        }
        /* Example styling */
        .example {
            margin-bottom: 12px;
            padding: 10px;
            background-color: #f9fafb; /* Very light gray */
            border-radius: 6px;
        }
         .example p {
            margin-bottom: 4px;
        }
        /* Styling for lists (time examples) */
        .time-list-item {
            margin-bottom: 8px;
            padding-left: 10px;
            border-left: 2px solid #d1d5db;
        }
        /* Chinese Text Font (SimSun first) */
        .chinese-text {
            font-size: 1.1em;
            font-weight: 500;
            font-family: 'SimSun', 'Songti SC', 'Noto Serif SC', serif;
        }
        /* Pinyin Font (Inter Sans-serif) */
        .pinyin-text {
            color: #6b7280; /* Gray for Pinyin */
            font-style: italic;
            font-family: 'Inter', sans-serif;
            font-size: 0.95em; /* Slightly smaller pinyin */
        }
        /* Japanese Text Font (Inherits from body - Japanese Serif) */
        .japanese-text {
            color: #374151; /* Darker gray for Japanese */
        }
        /* Quiz container styling */
        .quiz-section {
            margin-top: 25px;
            padding: 20px;
            background-color: #f3f4f6; /* Light gray background */
            border-radius: 8px;
        }
        .quiz-section h3 {
            font-weight: 600;
            margin-bottom: 15px;
            color: #1f2937; /* Dark gray */
        }
        .question-container { /* Container for the single question */
             min-height: 140px; /* Adjust height to prevent layout jumps */
             margin-bottom: 15px;
        }
        .question {
             padding: 15px;
             background-color: #ffffff;
             border-radius: 6px;
             box-shadow: 0 1px 3px rgba(0,0,0,0.05);
        }
        /* Style for question instructions */
        .question-instruction {
            font-size: 0.9em;
            color: #4b5563; /* Slightly darker gray */
            margin-bottom: 10px;
            font-style: italic;
            font-family: inherit; /* Ensure instructions use Japanese Serif */
        }
        /* Style for multiple choice options */
        .choice-option {
             margin-bottom: 8px; /* Space between options */
        }
        /* Success Animation */
        .success-message {
            padding: 15px;
            margin-top: 15px;
            background-color: #dcfce7;
            color: #166534;
            border: 1px solid #86efac;
            border-radius: 8px;
            text-align: center;
            font-size: 1.2em;
            font-weight: bold;
            animation: successPop 0.6s ease-out forwards;
            transform-origin: center;
            font-family: inherit; /* Ensure success message uses Japanese Serif */
        }
        .success-message.hidden {
            display: none;
            opacity: 0;
            transform: scale(0.5);
        }
        @keyframes successPop {
            0% { opacity: 0; transform: scale(0.5); }
            60% { opacity: 1; transform: scale(1.05); }
            100% { opacity: 1; transform: scale(1); }
        }

    </style>
</head>
<body class="p-4 md:p-8">

    <div class="container">
        <a href="3k.html" class="nav-button mb-6 mr-0 mt-0">&lt; æˆ»ã‚‹</a>

        <h1 class="text-2xl md:text-3xl font-bold mb-6 text-center">ç¬¬3èª²ã€€æ–‡æ³•å­¦ç¿’</h1>

        <div id="table-of-contents">
            <h2 class="text-xl font-semibold mb-4">ç›®æ¬¡</h2>
            <ul class="list-none p-0">
                <li><a href="#" onclick="showSection('grammar-1'); return false;" class="text-blue-700 hover:text-blue-900">1. æ™‚åˆ»ã®è¨€ã„æ–¹ã«ã¤ã„ã¦</a></li>
                <li><a href="#" onclick="showSection('grammar-2'); return false;" class="text-blue-700 hover:text-blue-900">2. â€œä»â€ã¨â€œåˆ°â€ã«ã¤ã„ã¦</a></li>
                <li><a href="#" onclick="showSection('grammar-3'); return false;" class="text-blue-700 hover:text-blue-900">3. â€œå‘¢â€ã«ã¤ã„ã¦</a></li>
                <li><a href="#" onclick="showSection('grammar-4'); return false;" class="text-blue-700 hover:text-blue-900">4. â€œåœ¨â€ã«ã¤ã„ã¦</a></li>
                <li><a href="#" onclick="showSection('grammar-5'); return false;" class="text-blue-700 hover:text-blue-900">5. â€œä¹Ÿâ€ã«ã¤ã„ã¦</a></li>
                <li><a href="#" onclick="showSection('grammar-6'); return false;" class="text-blue-700 hover:text-blue-900">6. å½¢å®¹è©è¿°èªæ–‡ã«ã¤ã„ã¦</a></li>
            </ul>
        </div>

        <div id="grammar-content" class="mt-8">

            <div id="grammar-1" class="grammar-section hidden">
                <button onclick="showSection('table-of-contents'); return false;" class="quiz-button quiz-button-secondary mb-4">ç›®æ¬¡ã«æˆ»ã‚‹</button>
                <h2 class="text-xl font-semibold">1. æ™‚åˆ»ã®è¨€ã„æ–¹ã«ã¤ã„ã¦</h2>
                <div class="explanation-box">
                    <h3>ãƒã‚¤ãƒ³ãƒˆ</h3>
                    <p><strong>æ„å‘³ï¼š</strong>â€œç‚¹ (diÇn)â€ï¼ã€Œæ™‚ã€ã€ â€œåˆ† (fÄ“n)â€ï¼ã€Œåˆ†ã€ã€‚</p>
                    <p><strong>ç‰¹æ®Šãªè¨€ã„æ–¹ï¼š</strong></p>
                    <ul>
                        <li>2æ™‚ï¼š â€œäºŒç‚¹ (Ã¨r diÇn)â€ ã§ã¯ãªã â€œä¸¤ç‚¹ (liÇng diÇn)â€ ã¨è¨€ã†ã®ãŒä¸€èˆ¬çš„ã§ã™ã€‚</li>
                        <li>15åˆ†ï¼š â€œåäº”åˆ† (shÃ­wÇ” fÄ“n)â€ ã¾ãŸã¯ â€œä¸€åˆ» (yÃ­ kÃ¨)â€</li>
                        <li>30åˆ†ï¼š â€œä¸‰ååˆ† (sÄnshÃ­ fÄ“n)â€ ã¾ãŸã¯ â€œåŠ (bÃ n)â€</li>
                        <li>45åˆ†ï¼š â€œå››åäº”åˆ† (sÃ¬shÃ­wÇ” fÄ“n)â€ ã¾ãŸã¯ â€œä¸‰åˆ» (sÄn kÃ¨)â€</li>
                        <li>ï½åˆ†å‰ï¼š â€œå·® (chÃ ) ï½åˆ† ï½ç‚¹â€ (ä¾‹ï¼šå·®ååˆ†å…«ç‚¹ = 8æ™‚10åˆ†å‰ = 7æ™‚50åˆ†)</li>
                    </ul>
                     <p><strong>èªå½™ï¼š</strong>é›¶ (lÃ­ng)ï¼ã‚¼ãƒ­, ç°åœ¨ (xiÃ nzÃ i)ï¼ä»Š</p>
                </div>
                <h3 class="font-semibold mt-4 mb-2">ä¾‹æ–‡ï¼š</h3>
                <div class="example">
                    <p class="chinese-text"> Aï¼š<span class="clickable-sentence" data-audio="sound/3k-p-1-1.mp3">ç°åœ¨å‡ ç‚¹ï¼Ÿ</span></p>
                    <p class="pinyin-text">A: XiÃ nzÃ i jÇ diÇn? </p>
                    <p class="japanese-text">A: ä»Šã¯ä½•æ™‚ã§ã™ã‹ã€‚</p>
                    </div>
 <div class="example">
                    <p class="chinese-text">Bï¼š<span class="clickable-sentence" data-audio="sound/3k-p-1-2.mp3">ç°åœ¨ä¸‰ç‚¹äºŒååˆ†ã€‚</span> </p>
                    <p class="pinyin-text">B: XiÃ nzÃ i sÄn diÇn Ã¨rshÃ­ fÄ“n.</p>
                    <p class="japanese-text">B: ä»Šã¯ä¸‰æ™‚äºŒååˆ†ã§ã™ã€‚</p>
                     
                </div>
                 <h3 class="font-semibold mt-4 mb-2">æ™‚åˆ»ã®ä¾‹ï¼š</h3>
                 <div class="example">
                     <div class="time-list-item">
                         6:07 <span class="chinese-text clickable-item ml-2" data-audio="sound/3k-p-1-3.mp3">å…­ç‚¹é›¶ä¸ƒåˆ†</span> <span class="pinyin-text">(liÃ¹ diÇn lÃ­ng qÄ« fÄ“n)</span>
                     </div>
                      <div class="time-list-item">
                         2:10 <span class="chinese-text clickable-item ml-2" data-audio="sound/3k-p-1-5.mp3">ä¸¤ç‚¹ååˆ†</span> <span class="pinyin-text">(liÇng diÇn shÃ­ fÄ“n)</span>
                     </div>
                      <div class="time-list-item">
                         8:15 <span class="chinese-text clickable-item ml-2" data-audio="sound/3k-p-1-7.mp3">å…«ç‚¹åäº”åˆ†</span> / å…«ç‚¹ä¸€åˆ» <span class="pinyin-text">(bÄ diÇn shÃ­wÇ” fÄ“n / bÄ diÇn yÃ­ kÃ¨)</span>
                     </div>
                      <div class="time-list-item">
                         9:30 <span class="chinese-text clickable-item ml-2" data-audio="sound/3k-p-1-4.mp3">ä¹ç‚¹ä¸‰ååˆ†</span> / ä¹ç‚¹åŠ <span class="pinyin-text">(jiÇ” diÇn sÄnshÃ­ fÄ“n / jiÇ” diÇn bÃ n)</span>
                     </div>
                      <div class="time-list-item">
                         10:45 <span class="chinese-text clickable-item ml-2" data-audio="sound/3k-p-1-6.mp3">åç‚¹å››åäº”åˆ†</span> / åç‚¹ä¸‰åˆ» <span class="pinyin-text">(shÃ­ diÇn sÃ¬shÃ­wÇ” fÄ“n / shÃ­ diÇn sÄn kÃ¨)</span>
                     </div>
                      <div class="time-list-item">
                         11:56 <span class="chinese-text clickable-item ml-2" data-audio="sound/3k-p-1-8.mp3">åä¸€ç‚¹äº”åå…­åˆ†</span> / å·®å››åˆ†åäºŒç‚¹ <span class="pinyin-text">(shÃ­yÄ« diÇn wÇ”shÃ­liÃ¹ fÄ“n / chÃ  sÃ¬ fÄ“n shÃ­Ã¨r diÇn)</span>
                     </div>
                 </div>
                <div class="quiz-section">
                    <h3>ãƒŸãƒ‹ç·´ç¿’</h3>
                    <div id="question-container-1" class="question-container"></div>
                    <div id="feedback-1" class="feedback hidden"></div>
                    <div id="success-animation-1" class="success-message hidden">æ™‚åˆ»ã®è¨€ã„æ–¹ã€å®Œç’§ï¼ğŸ•’</div>
                    <button id="submit-1" class="quiz-button" onclick="submitQuiz(1)">å›ç­”ã™ã‚‹</button>
                    <button id="retry-1" class="quiz-button quiz-button-secondary hidden" onclick="loadQuiz(1)">ã‚‚ã†ä¸€åº¦æŒ‘æˆ¦</button>
                </div>
            </div>

            <div id="grammar-2" class="grammar-section hidden">
                <button onclick="showSection('table-of-contents'); return false;" class="quiz-button quiz-button-secondary mb-4">ç›®æ¬¡ã«æˆ»ã‚‹</button>
                <h2 class="text-xl font-semibold">2. â€œä»â€ã¨â€œåˆ°â€ã«ã¤ã„ã¦</h2>
                 <div class="explanation-box">
                    <h3>ãƒã‚¤ãƒ³ãƒˆ</h3>
                    <p><strong>æ„å‘³ï¼š</strong>â€œä» (cÃ³ng)â€ï¼ã€Œï½ã‹ã‚‰ã€ã€ â€œåˆ° (dÃ o)â€ï¼ã€Œï½ã¾ã§ã€ã€‚</p>
                    <p><strong>ä½¿ã„æ–¹ï¼š</strong>æ™‚é–“ã‚„å ´æ‰€ã®èµ·ç‚¹ã¨çµ‚ç‚¹ã‚’è¡¨ã—ã¾ã™ã€‚</p>
                    <ul>
                        <li>ä» + èµ·ç‚¹ (æ™‚åˆ»/å ´æ‰€)</li>
                        <li>åˆ° + çµ‚ç‚¹ (æ™‚åˆ»/å ´æ‰€)</li>
                        <li>ä» + èµ·ç‚¹ + åˆ° + çµ‚ç‚¹ (èµ·ç‚¹ã‹ã‚‰çµ‚ç‚¹ã¾ã§)</li>
                    </ul>
                    <p><strong>èªå½™ï¼š</strong>è¿œ (yuÇn)ï¼é ã„, ä¸‹åˆ (xiÃ wÇ”)ï¼åˆå¾Œ, å­¦ä¹  (xuÃ©xÃ­)ï¼å‹‰å¼·ã™ã‚‹, å¤§å­¦ (dÃ xuÃ©)ï¼å¤§å­¦, è¯å¦†åº— (yÃ ozhuÄngdiÃ n)ï¼ãƒ‰ãƒ©ãƒƒã‚°ã‚¹ãƒˆã‚¢</p>
                </div>
                <h3 class="font-semibold mt-4 mb-2">ä¾‹æ–‡ï¼š</h3>
                <div class="example">
                     <p class="chinese-text"> Aï¼š<span class="clickable-sentence" data-audio="sound/3k-p-2-1.mp3">ä¸‹åˆä½ ä»å‡ ç‚¹åˆ°å‡ ç‚¹å­¦ä¹ ï¼Ÿ</span></p>
                    <p class="pinyin-text">A: XiÃ wÇ” nÇ cÃ³ng jÇ diÇn dÃ o jÇ diÇn xuÃ©xÃ­?</p>
                    <p class="japanese-text">A: åˆå¾Œä½•æ™‚ã‹ã‚‰ä½•æ™‚ã¾ã§å‹‰å¼·ã—ã¾ã™ã‹ã€‚</p>
                    
                </div>
<div class="example">
                     <p class="chinese-text">Bï¼š<span class="clickable-sentence" data-audio="sound/3k-p-2-2.mp3">æˆ‘ä»ä¸‹åˆä¸‰ç‚¹åˆ°äº”ç‚¹å­¦ä¹ ã€‚</span> </p>
                    <p class="pinyin-text">B: WÇ’ cÃ³ng xiÃ wÇ” sÄn diÇn dÃ o wÇ” diÇn xuÃ©xÃ­.</p>
                    <p class="japanese-text">B: ç§ã¯åˆå¾Œ3æ™‚ã‹ã‚‰5æ™‚ã¾ã§å‹‰å¼·ã—ã¾ã™ã€‚</p>
                    
                </div>
                 <div class="example">
                     <p class="chinese-text"> Aï¼š<span class="clickable-sentence" data-audio="sound/3k-p-2-3.mp3">ä»å¤§å­¦åˆ°è¯å¦†åº—è¿œå—ï¼Ÿ</span></p>
                    <p class="pinyin-text">A: CÃ³ng dÃ xuÃ© dÃ o yÃ ozhuÄngdiÃ n yuÇn ma?</p>
                    <p class="japanese-text">A: å¤§å­¦ã‹ã‚‰ãƒ‰ãƒ©ãƒƒã‚°ã‚¹ãƒˆã‚¢ã¾ã§ã¯é ã„ã§ã™ã‹ã€‚</p>
                   </div>
    <div class="example">
                     <p class="chinese-text">Bï¼š<span class="clickable-sentence" data-audio="sound/3k-p-2-4.mp3">ä»å¤§å­¦åˆ°è¯å¦†åº—å¾ˆè¿œã€‚</span> </p>
                    <p class="pinyin-text">B: CÃ³ng dÃ xuÃ© dÃ o yÃ ozhuÄngdiÃ n hÄ›n yuÇn.</p>
                    <p class="japanese-text">B: å¤§å­¦ã‹ã‚‰ãƒ‰ãƒ©ãƒƒã‚°ã‚¹ãƒˆã‚¢ã¾ã§ã¯ã¨ã¦ã‚‚é ã„ã§ã™ã€‚</p>
                    
                </div>
                <div class="quiz-section">
                    <h3>ãƒŸãƒ‹ç·´ç¿’</h3>
                    <div id="question-container-2" class="question-container"></div>
                    <div id="feedback-2" class="feedback hidden"></div>
                    <div id="success-animation-2" class="success-message hidden">ä»...åˆ°... ã‚‚ãƒã‚¹ã‚¿ãƒ¼ï¼â¡ï¸</div>
                    <button id="submit-2" class="quiz-button" onclick="submitQuiz(2)">å›ç­”ã™ã‚‹</button>
                    <button id="retry-2" class="quiz-button quiz-button-secondary hidden" onclick="loadQuiz(2)">ã‚‚ã†ä¸€åº¦æŒ‘æˆ¦</button>
                </div>
            </div>

            <div id="grammar-3" class="grammar-section hidden">
                <button onclick="showSection('table-of-contents'); return false;" class="quiz-button quiz-button-secondary mb-4">ç›®æ¬¡ã«æˆ»ã‚‹</button>
                <h2 class="text-xl font-semibold">3. â€œå‘¢â€ã«ã¤ã„ã¦</h2>
                <div class="explanation-box">
                    <h3>ãƒã‚¤ãƒ³ãƒˆ</h3>
                    <p><strong>æ„å‘³ï¼š</strong>â€œå‘¢ (ne)â€ ã¯æ–‡æœ«ã«ç½®ã„ã¦ã€ã€Œï½ã¯ï¼Ÿã€ã€Œï½ã®æ–¹ã¯ï¼ˆã©ã†ã§ã™ã‹ï¼‰ï¼Ÿã€ã¨ã€å‰ã«è¿°ã¹ã‚‰ã‚ŒãŸäº‹æŸ„ã«ã¤ã„ã¦ä»–ã®å¯¾è±¡ã‚’å°‹ã­ãŸã‚Šã€è©±é¡Œã‚’è»¢æ›ã—ãŸã‚Šã™ã‚‹æ™‚ã«ä½¿ã„ã¾ã™ã€‚</p>
                    <p><strong>ä½¿ã„æ–¹ï¼š</strong>åè© / äººç§°ä»£åè© + å‘¢ï¼Ÿ</p>
                   
                </div>
                <h3 class="font-semibold mt-4 mb-2">ä¾‹æ–‡ï¼š</h3>
                <div class="example">
                    <p class="chinese-text"><span class="clickable-sentence" data-audio="sound/3k-p-3-1.mp3">è¯å¦†åº—çš„å®¢äººå¾ˆå¤šï¼Œä¾¿åˆ©åº—å‘¢ï¼Ÿ</span></p>
                    <p class="pinyin-text">YÃ ozhuÄngdiÃ n de kÃ¨rÃ©n hÄ›n duÅ, biÃ nlÃ¬diÃ n ne?</p>
                    <p class="japanese-text">ãƒ‰ãƒ©ãƒƒã‚°ã‚¹ãƒˆã‚¢ã¯ãŠå®¢ãŒå¤šã„ã§ã™ãŒã€ã‚³ãƒ³ãƒ“ãƒ‹ã¯(ã©ã†ã§ã™ã‹)ã€‚</p>
                </div>
                <div class="example">
                    <p class="chinese-text"><span class="clickable-sentence" data-audio="sound/3k-p-3-2.mp3">æˆ‘åˆ°ä¸‹åˆ5ç‚¹æ‰“å·¥ï¼Œä½ å‘¢ï¼Ÿ</span></p>
                    <p class="pinyin-text">WÇ’ dÃ o xiÃ wÇ” wÇ” diÇn dÇgÅng, nÇ ne?</p>
                    <p class="japanese-text">ç§ã¯åˆå¾Œ5æ™‚ã¾ã§ãƒã‚¤ãƒˆã—ã¾ã™ãŒã€ã‚ãªãŸã¯(ã©ã†ã§ã™ã‹)ã€‚</p>
                </div>
                <div class="example">
                    <p class="chinese-text"><span class="clickable-sentence" data-audio="sound/3k-p-3-3.mp3">æˆ‘çš„ç”Ÿæ—¥æ˜¯9æœˆ7å·ï¼Œä½ å‘¢ï¼Ÿ</span></p>
                    <p class="pinyin-text">WÇ’ de shÄ“ngrÃ¬ shÃ¬ jiÇ” yuÃ¨ qÄ« hÃ o, nÇ ne?</p>
                    <p class="japanese-text">ç§ã®èª•ç”Ÿæ—¥ã¯9æœˆ7æ—¥ã§ã™ã€‚ã‚ãªãŸã¯ï¼ˆã„ã¤ã§ã™ã‹ï¼‰ã€‚</p>
                </div>
                <div class="quiz-section">
                    <h3>ãƒŸãƒ‹ç·´ç¿’</h3>
                    <div id="question-container-3" class="question-container"></div>
                    <div id="feedback-3" class="feedback hidden"></div>
                    <div id="success-animation-3" class="success-message hidden">â€œå‘¢â€ã®ä½¿ã„æ–¹ã‚‚ãƒãƒƒãƒãƒªï¼ğŸ‘</div>
                    <button id="submit-3" class="quiz-button" onclick="submitQuiz(3)">å›ç­”ã™ã‚‹</button>
                    <button id="retry-3" class="quiz-button quiz-button-secondary hidden" onclick="loadQuiz(3)">ã‚‚ã†ä¸€åº¦æŒ‘æˆ¦</button>
                </div>
            </div>

            <div id="grammar-4" class="grammar-section hidden">
                 <button onclick="showSection('table-of-contents'); return false;" class="quiz-button quiz-button-secondary mb-4">ç›®æ¬¡ã«æˆ»ã‚‹</button>
                <h2 class="text-xl font-semibold">4. â€œåœ¨â€ã«ã¤ã„ã¦</h2>
                <div class="explanation-box">
                    <h3>ãƒã‚¤ãƒ³ãƒˆ</h3>
                    <p><strong>æ„å‘³ï¼š</strong>å‰ç½®è©ã®â€œåœ¨ (zÃ i)â€ ã¯ã€å‹•ä½œãŒè¡Œã‚ã‚Œã‚‹å ´æ‰€ã‚’ç¤ºã—ã€ã€Œï½ã§ã€ã¨ã„ã†æ„å‘³ã‚’è¡¨ã—ã¾ã™ã€‚</p>
                    <p><strong>ä½¿ã„æ–¹ï¼š</strong></p>
                    <ul>
                        <li><strong>è‚¯å®šæ–‡ï¼š</strong>ä¸»èª + åœ¨ + å ´æ‰€ + å‹•è© + (ç›®çš„èª)ã€‚</li>
                        <li><strong>å¦å®šæ–‡ï¼š</strong>ä¸»èª + ä¸ + åœ¨ + å ´æ‰€ + å‹•è© + (ç›®çš„èª)ã€‚</li>
                        <li><strong>ç–‘å•æ–‡ (å—)ï¼š</strong>ä¸»èª + åœ¨ + å ´æ‰€ + å‹•è© + (ç›®çš„èª) + å—ï¼Ÿ</li>
                        <li><strong>ç–‘å•æ–‡ (åå¾©)ï¼š</strong>ä¸»èª + åœ¨ä¸åœ¨ + å ´æ‰€ + å‹•è© + (ç›®çš„èª)ï¼Ÿ</li>
                    </ul>
                     
                </div>
                <h3 class="font-semibold mt-4 mb-2">ä¾‹æ–‡ï¼š</h3>
                 <div class="example">
                    <p class="chinese-text"><span class="clickable-sentence" data-audio="sound/3k-p-4-1.mp3">æˆ‘åœ¨å¤§å­¦å­¦ä¹ ä¸­æ–‡ã€‚</span></p>
                    <p class="pinyin-text">WÇ’ zÃ i dÃ xuÃ© xuÃ©xÃ­ ZhÅngwÃ©n.</p>
                    <p class="japanese-text">ç§ã¯å¤§å­¦ã§ä¸­å›½èªã‚’å‹‰å¼·ã—ã¦ã„ã¾ã™ã€‚</p>
                </div>
                 <div class="example">
                    <p class="chinese-text"><span class="clickable-sentence" data-audio="sound/3k-p-4-2.mp3">ææ˜ä¸åœ¨ä¾¿åˆ©åº—æ‰“å·¥ã€‚</span></p>
                    <p class="pinyin-text">LÇ MÃ­ng bÃº zÃ i biÃ nlÃ¬diÃ n dÇgÅng.</p>
                    <p class="japanese-text">ææ˜ã•ã‚“ã¯ã‚³ãƒ³ãƒ“ãƒ‹ã§ã‚¢ãƒ«ãƒã‚¤ãƒˆã‚’ã—ã¦ã„ã¾ã›ã‚“ã€‚</p>
                </div>
                 <div class="example">
                     <p class="chinese-text"><span class="clickable-sentence" data-audio="sound/3k-p-4-3.mp3">å±±æœ¬åœ¨è¯å¦†åº—æ‰“å·¥å—ï¼Ÿ</span> / å±±æœ¬åœ¨ä¸åœ¨è¯å¦†åº—æ‰“å·¥ï¼Ÿ</p>
                    <p class="pinyin-text">ShÄnbÄ›n zÃ i yÃ ozhuÄngdiÃ n dÇgÅng ma? / ShÄnbÄ›n zÃ i bu zÃ i yÃ ozhuÄngdiÃ n dÇgÅng?</p>
                    <p class="japanese-text">å±±æœ¬ã•ã‚“ã¯ãƒ‰ãƒ©ãƒƒã‚°ã‚¹ãƒˆã‚¢ã§ã‚¢ãƒ«ãƒã‚¤ãƒˆã‚’ã—ã¦ã„ã¾ã™ã‹ã€‚</p>
                     <p class="text-sm text-gray-500 mt-1">ï¼ˆæ³¨ï¼šéŸ³å£°ã¯æœ€åˆã®æ–‡ "å±±æœ¬åœ¨è¯å¦†åº—æ‰“å·¥å—ï¼Ÿ" ã«å¯¾å¿œã—ã¦ã„ã¾ã™ï¼‰</p>
                </div>
                <div class="quiz-section">
                    <h3>ãƒŸãƒ‹ç·´ç¿’</h3>
                    <div id="question-container-4" class="question-container"></div>
                    <div id="feedback-4" class="feedback hidden"></div>
                    <div id="success-animation-4" class="success-message hidden">å ´æ‰€ã‚’è¡¨ã™â€œåœ¨â€ã‚‚OKï¼ğŸ“</div>
                    <button id="submit-4" class="quiz-button" onclick="submitQuiz(4)">å›ç­”ã™ã‚‹</button>
                    <button id="retry-4" class="quiz-button quiz-button-secondary hidden" onclick="loadQuiz(4)">ã‚‚ã†ä¸€åº¦æŒ‘æˆ¦</button>
                </div>
            </div>

            <div id="grammar-5" class="grammar-section hidden">
                 <button onclick="showSection('table-of-contents'); return false;" class="quiz-button quiz-button-secondary mb-4">ç›®æ¬¡ã«æˆ»ã‚‹</button>
                <h2 class="text-xl font-semibold">5. â€œä¹Ÿâ€ã«ã¤ã„ã¦</h2>
                <div class="explanation-box">
                    <h3>ãƒã‚¤ãƒ³ãƒˆ</h3>
                    <p><strong>æ„å‘³ï¼š</strong>å‰¯è©ã®â€œä¹Ÿ (yÄ›)â€ ã¯ã€ã€Œï½ã‚‚ã€ã¨ã„ã†æ„å‘³ã‚’è¡¨ã—ã¾ã™ã€‚</p>
                    <p><strong>ä½¿ã„æ–¹ï¼š</strong>ä¸»èªã¨è¿°èªï¼ˆå‹•è©ã‚„å½¢å®¹è©ï¼‰ã®é–“ã«ç½®ã‹ã‚Œã¾ã™ã€‚</p>
                    <p><strong>èªé †ï¼š</strong>ä¸»èª + ä¹Ÿ + è¿°èª + (ç›®çš„èª)ã€‚</p>
                </div>
                <h3 class="font-semibold mt-4 mb-2">ä¾‹æ–‡ï¼š</h3>
                <div class="example">
                    <p class="chinese-text"> Aï¼š<span class="clickable-sentence" data-audio="sound/3k-p-5-1.mp3">æˆ‘å­¦ä¹ ä¸­æ–‡ï¼Œä½ å‘¢ï¼Ÿ</span></p>
                    <p class="pinyin-text">A: WÇ’ xuÃ©xÃ­ ZhÅngwÃ©n, nÇ ne?</p>
                    <p class="japanese-text">A: ç§ã¯ä¸­å›½èªã‚’å‹‰å¼·ã—ã¾ã™ã€‚ã‚ãªãŸã¯ã€‚</p>
                   
                </div>
<div class="example">
                    <p class="chinese-text">Bï¼š<span class="clickable-sentence" data-audio="sound/3k-p-5-2.mp3">æˆ‘ä¹Ÿå­¦ä¹ ä¸­æ–‡ã€‚</span> </p>
                    <p class="pinyin-text">B: WÇ’ yÄ› xuÃ©xÃ­ ZhÅngwÃ©n.</p>
                    <p class="japanese-text">B: ç§ã‚‚ä¸­å›½èªã‚’å‹‰å¼·ã—ã¾ã™ã€‚</p>
                     
                </div>
                <div class="example">
                    <p class="chinese-text"> Aï¼š<span class="clickable-sentence" data-audio="sound/3k-p-5-3.mp3">æˆ‘çš„ç”Ÿæ—¥æ˜¯5æœˆ8å·ã€‚</span></p>
                    <p class="pinyin-text">A: WÇ’ de shÄ“ngrÃ¬ shÃ¬ wÇ” yuÃ¨ bÄ hÃ o.</p>
                    <p class="japanese-text">A: ç§ã®èª•ç”Ÿæ—¥ã¯5æœˆ8æ—¥ã§ã™ã€‚</p>
                    
                </div>
    <div class="example">
                    <p class="chinese-text">Bï¼š<span class="clickable-sentence" data-audio="sound/3k-p-5-4.mp3">æˆ‘å¦ˆå¦ˆçš„ç”Ÿæ—¥ä¹Ÿæ˜¯5æœˆ8å·ã€‚</span> </p>
                    <p class="pinyin-text">B: WÇ’ mÄma de shÄ“ngrÃ¬ yÄ› shÃ¬ wÇ” yuÃ¨ bÄ hÃ o.</p>
                    <p class="japanese-text">B: ç§ã®æ¯ã®èª•ç”Ÿæ—¥ã‚‚5æœˆ8æ—¥ã§ã™ã€‚</p>
                   
                </div>
                <div class="quiz-section">
                    <h3>ãƒŸãƒ‹ç·´ç¿’</h3>
                    <div id="question-container-5" class="question-container"></div>
                    <div id="feedback-5" class="feedback hidden"></div>
                    <div id="success-animation-5" class="success-message hidden">â€œä¹Ÿâ€ã®ä½¿ã„æ–¹ã‚‚è¦šãˆã¾ã—ãŸã­ï¼ğŸ˜Š</div>
                    <button id="submit-5" class="quiz-button" onclick="submitQuiz(5)">å›ç­”ã™ã‚‹</button>
                    <button id="retry-5" class="quiz-button quiz-button-secondary hidden" onclick="loadQuiz(5)">ã‚‚ã†ä¸€åº¦æŒ‘æˆ¦</button>
                </div>
            </div>

            <div id="grammar-6" class="grammar-section hidden">
                <button onclick="showSection('table-of-contents'); return false;" class="quiz-button quiz-button-secondary mb-4">ç›®æ¬¡ã«æˆ»ã‚‹</button>
                <h2 class="text-xl font-semibold">6. å½¢å®¹è©è¿°èªæ–‡ã«ã¤ã„ã¦</h2>
                <div class="explanation-box">
                    <h3>ãƒã‚¤ãƒ³ãƒˆ</h3>
                    <p><strong>å®šç¾©ï¼š</strong>å½¢å®¹è©è¿°èªæ–‡ã¨ã¯ã€å½¢å®¹è©ãŒç›´æ¥è¿°èªã«ãªã‚‹æ–‡ã®ã“ã¨ã§ã™ã€‚</p>
                    <p><strong>ä½¿ã„æ–¹ï¼š</strong></p>
                     <ul>
                        <li><strong>è‚¯å®šæ–‡ï¼š</strong>ä¸»èª + å‰¯è© (å¤šãã®å ´åˆ â€œå¾ˆ hÄ›nâ€) + å½¢å®¹è©ã€‚ ï¼ˆæ³¨ï¼šâ€œå¾ˆâ€ã¯ç‰¹ã«å¼·èª¿ã—ãªã„å ´åˆã§ã‚‚æ…£ç¿’çš„ã«ã¤ã‘ã‚‰ã‚Œã‚‹ã“ã¨ãŒå¤šã„ã§ã™ã€‚ã¤ã‘ãªã„ã¨å¯¾æ¯”ã®æ„å‘³åˆã„ãŒå‡ºã‚‹ã“ã¨ãŒã‚ã‚Šã¾ã™ã€‚ï¼‰</li>
                        <li><strong>å¦å®šæ–‡ï¼š</strong>ä¸»èª + ä¸ + å½¢å®¹è©ã€‚</li>
                        <li><strong>ç–‘å•æ–‡ (å—)ï¼š</strong>ä¸»èª + å½¢å®¹è© + å—ï¼Ÿ</li>
                        <li><strong>ç–‘å•æ–‡ (åå¾©)ï¼š</strong>ä¸»èª + å½¢å®¹è© + ä¸ + å½¢å®¹è©ï¼Ÿ</li>
                    </ul>
                                    </div>
                <h3 class="font-semibold mt-4 mb-2">ä¾‹æ–‡ï¼š</h3>
                 <div class="example">
                    <p class="chinese-text"><span class="clickable-sentence" data-audio="sound/3k-p-6-1.mp3">çˆ±çŸ¥æ·‘å¾·å¤§å­¦çš„ç•™å­¦ç”Ÿå¾ˆå¤šã€‚</span></p>
                    <p class="pinyin-text">Ã€izhÄ« shÅ«dÃ© dÃ xuÃ© de liÃºxuÃ©shÄ“ng hÄ›n duÅ.</p>
                    <p class="japanese-text">æ„›çŸ¥æ·‘å¾³å¤§å­¦ã®ç•™å­¦ç”Ÿã¯å¤šã„ã§ã™ã€‚</p>
                </div>
                 <div class="example">
                    <p class="chinese-text"> Aï¼š<span class="clickable-sentence" data-audio="sound/3k-p-6-2.mp3">ä½ åœ¨ä¾¿åˆ©åº—æ‰“å·¥è¾›è‹¦å—ï¼Ÿ</span> / ä½ åœ¨ä¾¿åˆ©åº—æ‰“å·¥è¾›è‹¦ä¸è¾›è‹¦ï¼Ÿ</p>
                    <p class="pinyin-text">A: NÇ zÃ i biÃ nlÃ¬diÃ n dÇgÅng xÄ«nkÇ” ma? / NÇ zÃ i biÃ nlÃ¬diÃ n dÇgÅng xÄ«nkÇ” bu xÄ«nkÇ”?</p>
                    <p class="japanese-text">A: ã‚³ãƒ³ãƒ“ãƒ‹ã§ã®ã‚¢ãƒ«ãƒã‚¤ãƒˆã¯å¤§å¤‰ã§ã™ã‹ã€‚</p>
           
                </div>
    <div class="example">
                    <p class="chinese-text"> Bï¼š<span class="clickable-sentence" data-audio="sound/3k-p-6-3.mp3">ä¸è¾›è‹¦ã€‚</span> </p>
                    <p class="pinyin-text">B: BÃ¹ xÄ«nkÇ”.</p>
                    <p class="japanese-text">B: å¤§å¤‰ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚</p>
                     
                </div>
                <div class="quiz-section">
                    <h3>ãƒŸãƒ‹ç·´ç¿’</h3>
                    <div id="question-container-6" class="question-container"></div>
                    <div id="feedback-6" class="feedback hidden"></div>
                    <div id="success-animation-6" class="success-message hidden">å½¢å®¹è©è¿°èªæ–‡ã‚‚ã‚¯ãƒªã‚¢ï¼âœ¨</div>
                    <button id="submit-6" class="quiz-button" onclick="submitQuiz(6)">å›ç­”ã™ã‚‹</button>
                    <button id="retry-6" class="quiz-button quiz-button-secondary hidden" onclick="loadQuiz(6)">ã‚‚ã†ä¸€åº¦æŒ‘æˆ¦</button>
                </div>
            </div>

        </div> <audio id="audio-player" style="display: none;"></audio>

    </div> <script>
        // --- State Variables ---
        let currentQuizState = {}; // Stores state for each quiz section

        // --- Quiz Data (New content, keys 1-6) ---
        const quizData = {
            1: [ // æ™‚åˆ»
                { type: 'multiple-choice', question: 'ã€Œ8:15ã€ã®åˆ¥ã®è¨€ã„æ–¹ã¯ï¼Ÿ', options: ['å…«ç‚¹ä¸€åˆ»', 'å…«ç‚¹åŠ', 'å…«ç‚¹ä¸‰åˆ»'], answer: 'å…«ç‚¹ä¸€åˆ»' },
                { type: 'multiple-choice', question: 'ã€Œå·®å››åˆ†åäºŒç‚¹ã€ã¯ä½•æ™‚ã§ã™ã‹ï¼Ÿ', options: ['11:56', '12:04', '11:52'], answer: '11:56' },
                { type: 'multiple-choice', question: 'ã€Œä¸¤ç‚¹ååˆ†ã€ã¯ä½•æ™‚ã§ã™ã‹ï¼Ÿ', options: ['2:10', '10:02', '2:01'], answer: '2:10' },
                { type: 'multiple-choice', question: 'ã€Œä¹ç‚¹åŠã€ã¯ä½•æ™‚ã§ã™ã‹ï¼Ÿ', options: ['9:30', '9:03', '3:09'], answer: '9:30' },
            ],
            2: [ // ä»...åˆ°...
                { type: 'multiple-choice', question: 'ã€Œåˆå¾Œ3æ™‚ã‹ã‚‰5æ™‚ã¾ã§ã€ã‚’ä¸­å›½èªã§è¨€ã†ã¨ï¼Ÿ', options: ['ä»ä¸‹åˆä¸‰ç‚¹åˆ°äº”ç‚¹', 'ä¸‹åˆä¸‰ç‚¹ä»äº”ç‚¹åˆ°', 'ä¸‹åˆä»ä¸‰ç‚¹äº”ç‚¹åˆ°'], answer: 'ä»ä¸‹åˆä¸‰ç‚¹åˆ°äº”ç‚¹' },
                { type: 'multiple-choice', question: 'ã€Œå¤§å­¦ã‹ã‚‰ãƒ‰ãƒ©ãƒƒã‚°ã‚¹ãƒˆã‚¢ã¾ã§ã€ã‚’ä¸­å›½èªã§è¨€ã†ã¨ï¼Ÿ', options: ['ä»å¤§å­¦åˆ°è¯å¦†åº—', 'å¤§å­¦ä»è¯å¦†åº—åˆ°', 'åˆ°å¤§å­¦ä»è¯å¦†åº—'], answer: 'ä»å¤§å­¦åˆ°è¯å¦†åº—' },
                { type: 'multiple-choice', question: 'ã€Œä»å¤§å­¦åˆ°è¯å¦†åº—å¾ˆè¿œã€‚ã€ã®ã€Œè¿œã€ã®æ„å‘³ã¯ï¼Ÿ', options: ['é ã„', 'è¿‘ã„', 'å¤§ãã„'], answer: 'é ã„' },
                { type: 'multiple-choice', question: 'ã€Œæˆ‘ä»ä¸‹åˆä¸‰ç‚¹åˆ°äº”ç‚¹å­¦ä¹ ã€‚ã€ã®ã€Œå­¦ä¹ ã€ã®æ„å‘³ã¯ï¼Ÿ', options: ['å‹‰å¼·ã™ã‚‹', 'ã‚¢ãƒ«ãƒã‚¤ãƒˆã™ã‚‹', 'è¡Œã'], answer: 'å‹‰å¼·ã™ã‚‹' },
            ],
            3: [ // å‘¢
                { type: 'multiple-choice', question: 'ã€Œã‚ãªãŸã¯ï¼Ÿã€ã¨èãè¿”ã™æ™‚ã«ä½¿ãˆã‚‹ã®ã¯ï¼Ÿ', options: ['ä½ å‘¢ï¼Ÿ', 'ä½ å—ï¼Ÿ', 'ä½ ä¹Ÿï¼Ÿ'], answer: 'ä½ å‘¢ï¼Ÿ' },
                { type: 'multiple-choice', question: 'ã€Œç§ã®èª•ç”Ÿæ—¥ã¯9æœˆ7æ—¥ã§ã™ã€‚ã‚ãªãŸã¯ï¼Ÿã€ã®ä¸­å›½èªã¯ï¼Ÿ', options: ['æˆ‘çš„ç”Ÿæ—¥æ˜¯9æœˆ7å·ï¼Œä½ å‘¢ï¼Ÿ', 'æˆ‘çš„ç”Ÿæ—¥æ˜¯9æœˆ7å·å—ï¼Ÿ', 'æˆ‘çš„ç”Ÿæ—¥ä¹Ÿæ˜¯9æœˆ7å·ã€‚'], answer: 'æˆ‘çš„ç”Ÿæ—¥æ˜¯9æœˆ7å·ï¼Œä½ å‘¢ï¼Ÿ' },
                { type: 'multiple-choice', question: 'ã€Œè¯å¦†åº—çš„å®¢äººå¾ˆå¤šï¼Œä¾¿åˆ©åº—å‘¢ï¼Ÿã€ã®ã€Œä¾¿åˆ©åº—ã€ã®æ„å‘³ã¯ï¼Ÿ', options: ['ã‚³ãƒ³ãƒ“ãƒ‹', 'ãƒ‰ãƒ©ãƒƒã‚°ã‚¹ãƒˆã‚¢', 'å¤§å­¦'], answer: 'ã‚³ãƒ³ãƒ“ãƒ‹' },
                { type: 'multiple-choice', question: 'ã€Œæˆ‘åˆ°ä¸‹åˆ5ç‚¹æ‰“å·¥ï¼Œä½ å‘¢ï¼Ÿã€ã®ã€Œæ‰“å·¥ã€ã®æ„å‘³ã¯ï¼Ÿ', options: ['ã‚¢ãƒ«ãƒã‚¤ãƒˆã™ã‚‹', 'å‹‰å¼·ã™ã‚‹', 'å¸°ã‚‹'], answer: 'ã‚¢ãƒ«ãƒã‚¤ãƒˆã™ã‚‹' },
            ],
             4: [ // åœ¨
                { type: 'multiple-choice', question: 'ã€Œç§ã¯å¤§å­¦ã§ä¸­å›½èªã‚’å‹‰å¼·ã—ã¦ã„ã¾ã™ã€‚ã€ã®æ­£ã—ã„ä¸­å›½èªã¯ï¼Ÿ', options: ['æˆ‘åœ¨å¤§å­¦å­¦ä¹ ä¸­æ–‡ã€‚', 'æˆ‘åœ¨å­¦ä¹ å¤§å­¦ä¸­æ–‡ã€‚', 'æˆ‘å¤§å­¦åœ¨å­¦ä¹ ä¸­æ–‡ã€‚'], answer: 'æˆ‘åœ¨å¤§å­¦å­¦ä¹ ä¸­æ–‡ã€‚' },
                { type: 'multiple-choice', question: 'ã€Œææ˜ã•ã‚“ã¯ã‚³ãƒ³ãƒ“ãƒ‹ã§ã‚¢ãƒ«ãƒã‚¤ãƒˆã‚’ã—ã¦ã„ã¾ã›ã‚“ã€‚ã€ã®æ­£ã—ã„ä¸­å›½èªã¯ï¼Ÿ', options: ['ææ˜ä¸åœ¨ä¾¿åˆ©åº—æ‰“å·¥ã€‚', 'ææ˜åœ¨ä¸ä¾¿åˆ©åº—æ‰“å·¥ã€‚', 'ææ˜ä¾¿åˆ©åº—ä¸åœ¨æ‰“å·¥ã€‚'], answer: 'ææ˜ä¸åœ¨ä¾¿åˆ©åº—æ‰“å·¥ã€‚' },
                { type: 'multiple-choice', question: 'ã€Œå±±æœ¬åœ¨è¯å¦†åº—æ‰“å·¥å—ï¼Ÿã€ã‚’åå¾©ç–‘å•æ–‡ã§è¨€ã†ã¨ï¼Ÿ', options: ['å±±æœ¬åœ¨ä¸åœ¨è¯å¦†åº—æ‰“å·¥ï¼Ÿ', 'å±±æœ¬åœ¨è¯å¦†åº—æ‰“å·¥ä¸æ‰“å·¥ï¼Ÿ', 'å±±æœ¬æ˜¯ä¸æ˜¯åœ¨è¯å¦†åº—æ‰“å·¥ï¼Ÿ'], answer: 'å±±æœ¬åœ¨ä¸åœ¨è¯å¦†åº—æ‰“å·¥ï¼Ÿ' },
                { type: 'multiple-choice', question: 'å‰ç½®è©ã€Œåœ¨ã€ã¯ä½•ã‚’è¡¨ã—ã¾ã™ã‹ï¼Ÿ', options: ['å‹•ä½œã®å ´æ‰€', 'å‹•ä½œã®æ™‚é–“', 'å‹•ä½œã®å¯¾è±¡'], answer: 'å‹•ä½œã®å ´æ‰€' },
            ],
            5: [ // ä¹Ÿ
                { type: 'multiple-choice', question: 'ã€Œç§ã‚‚ä¸­å›½èªã‚’å‹‰å¼·ã—ã¾ã™ã€‚ã€ã®æ­£ã—ã„ä¸­å›½èªã¯ï¼Ÿ', options: ['æˆ‘ä¹Ÿå­¦ä¹ ä¸­æ–‡ã€‚', 'æˆ‘ä¹Ÿä¸­æ–‡å­¦ä¹ ã€‚', 'æˆ‘å­¦ä¹ ä¹Ÿä¸­æ–‡ã€‚'], answer: 'æˆ‘ä¹Ÿå­¦ä¹ ä¸­æ–‡ã€‚' },
                { type: 'multiple-choice', question: 'ã€Œç§ã®æ¯ã®èª•ç”Ÿæ—¥(ã€€)5æœˆ8æ—¥ã§ã™ã€‚ã€ã®(ã€€)ã«å…¥ã‚‹ã®ã¯ï¼Ÿ', options: ['ä¹Ÿ', 'ä¸', 'å—'], answer: 'ä¹Ÿ' },
                { type: 'multiple-choice', question: 'å‰¯è©ã€Œä¹Ÿã€ã¯é€šå¸¸ã©ã“ã«ç½®ã‹ã‚Œã¾ã™ã‹ï¼Ÿ', options: ['ä¸»èªã¨è¿°èªã®é–“', 'æ–‡é ­', 'æ–‡æœ«'], answer: 'ä¸»èªã¨è¿°èªã®é–“' },
                { type: 'multiple-choice', question: 'ã€Œæˆ‘å­¦ä¹ ä¸­æ–‡ï¼Œä½ å‘¢ï¼Ÿã€ã«å¯¾ã™ã‚‹ã€Œç§ã‚‚ã€ã¨ã„ã†ç­”ãˆã¯ï¼Ÿ', options: ['æˆ‘ä¹Ÿå­¦ä¹ ä¸­æ–‡ã€‚', 'æˆ‘ä¹Ÿã€‚', 'ä¹Ÿæˆ‘ã€‚'], answer: 'æˆ‘ä¹Ÿå­¦ä¹ ä¸­æ–‡ã€‚' },
            ],
            6: [ // å½¢å®¹è©è¿°èªæ–‡
                { type: 'multiple-choice', question: 'å½¢å®¹è©è¿°èªæ–‡ã®è‚¯å®šæ–‡ã§ã€å½¢å®¹è©ã®å‰ã«ã‚ˆãç½®ã‹ã‚Œã‚‹å‰¯è©ã¯ï¼Ÿ', options: ['å¾ˆ', 'ä¸', 'ä¹Ÿ'], answer: 'å¾ˆ' },
                { type: 'multiple-choice', question: 'ã€Œæ„›çŸ¥æ·‘å¾³å¤§å­¦ã®ç•™å­¦ç”ŸãŒå¤šã„ã§ã™ã€‚ã€ã®æ­£ã—ã„ä¸­å›½èªã¯ï¼Ÿ', options: ['çˆ±çŸ¥æ·‘å¾·å¤§å­¦çš„ç•™å­¦ç”Ÿå¾ˆå¤šã€‚', 'çˆ±çŸ¥æ·‘å¾·å¤§å­¦çš„ç•™å­¦ç”Ÿæ˜¯å¾ˆã€‚', 'çˆ±çŸ¥æ·‘å¾·å¤§å­¦çš„ç•™å­¦ç”Ÿå¾ˆå¤šå—ã€‚'], answer: 'çˆ±çŸ¥æ·‘å¾·å¤§å­¦çš„ç•™å­¦ç”Ÿå¾ˆå¤šã€‚' },
                { type: 'multiple-choice', question: 'ã€Œä½ åœ¨ä¾¿åˆ©åº—æ‰“å·¥è¾›è‹¦å—ï¼Ÿã€ã®ã€Œè¾›è‹¦ã€ã®æ„å‘³ã¯ï¼Ÿ', options: ['å¤§å¤‰ã ', 'æ¥½ã—ã„', 'é ã„'], answer: 'å¤§å¤‰ã ' },
                { type: 'multiple-choice', question: 'ã€Œä¸è¾›è‹¦ã€‚ã€ã¯ã©ã®ã‚ˆã†ãªæ„å‘³ã§ã™ã‹ï¼Ÿ', options: ['å¤§å¤‰ã§ã¯ã‚ã‚Šã¾ã›ã‚“', 'å¤§å¤‰ã§ã™', 'å¤§å¤‰ã§ã™ã‹'], answer: 'å¤§å¤‰ã§ã¯ã‚ã‚Šã¾ã›ã‚“' },
            ]
        };

        // --- DOM Elements ---
        const toc = document.getElementById('table-of-contents');
        const grammarSections = document.querySelectorAll('.grammar-section');
        const audioPlayer = document.getElementById('audio-player');

        // --- Functions ---

        // Function to show a specific section and hide others
        function showSection(sectionId) {
            if (sectionId !== 'table-of-contents') {
                toc.style.display = 'none';
            } else {
                 toc.style.display = 'block';
            }

            grammarSections.forEach(section => {
                if (section.id === sectionId) {
                    section.classList.remove('hidden');
                    section.classList.add('visible');
                    // Extract internal index (1-6) from sectionId
                    const grammarIndex = parseInt(sectionId.split('-')[1]);
                    // Check if grammarIndex is a valid number and exists in quizData
                    if (!isNaN(grammarIndex) && grammarIndex >= 1 && quizData[grammarIndex]) {
                         loadQuiz(grammarIndex); // Load quiz using internal index
                    } else if (!isNaN(grammarIndex) && grammarIndex >= 1 && !quizData[grammarIndex]) {
                         console.warn(`Quiz data for grammar index ${grammarIndex} not found.`);
                         const questionContainer = document.getElementById(`question-container-${grammarIndex}`);
                         if(questionContainer) questionContainer.innerHTML = '<p>ç·´ç¿’å•é¡Œã¯ã‚ã‚Šã¾ã›ã‚“ã€‚</p>';
                         const submitButton = document.getElementById(`submit-${grammarIndex}`);
                         const retryButton = document.getElementById(`retry-${grammarIndex}`);
                         if(submitButton) submitButton.style.display = 'none';
                         if(retryButton) retryButton.style.display = 'none';
                    }
                } else {
                    section.classList.add('hidden');
                    section.classList.remove('visible');
                }
            });
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        // Function to play audio
        function playAudio(audioSrc) {
            if (!audioSrc) return;
            audioPlayer.src = audioSrc;
            audioPlayer.play().catch(error => {
                console.error("éŸ³å£°ãƒ•ã‚¡ã‚¤ãƒ«ã®å†ç”Ÿã«å¤±æ•—ã—ã¾ã—ãŸ:", audioSrc, error);
            });
        }

        // Function to shuffle an array (Fisher-Yates algorithm)
        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }

        // Function to load/reset a quiz section (Uses internal index 1-6)
        function loadQuiz(grammarIndex) {
            const feedbackContainer = document.getElementById(`feedback-${grammarIndex}`);
            const submitButton = document.getElementById(`submit-${grammarIndex}`);
            const retryButton = document.getElementById(`retry-${grammarIndex}`);
            const successAnimation = document.getElementById(`success-animation-${grammarIndex}`);
            const questionContainer = document.getElementById(`question-container-${grammarIndex}`);

             if (!questionContainer || !feedbackContainer || !submitButton || !retryButton || !successAnimation) {
                 console.error(`Quiz elements not found for grammar index ${grammarIndex}`);
                 return;
             }
             if (!quizData[grammarIndex] || quizData[grammarIndex].length === 0) {
                 questionContainer.innerHTML = '<p>åˆ©ç”¨å¯èƒ½ãªç·´ç¿’å•é¡Œã¯ã‚ã‚Šã¾ã›ã‚“ã€‚</p>';
                 feedbackContainer.classList.add('hidden');
                 successAnimation.classList.add('hidden');
                 submitButton.classList.add('hidden');
                 retryButton.classList.add('hidden');
                 return;
             }

            const allQuestions = shuffleArray([...quizData[grammarIndex]]);
            const selectedQuestions = allQuestions.slice(0, 2);

            currentQuizState[grammarIndex] = {
                questions: selectedQuestions,
                correctAnswers: selectedQuestions.map(q => q.answer),
                currentQuestionIndex: 0,
                totalQuestions: selectedQuestions.length,
                completed: false
            };

            feedbackContainer.innerHTML = '';
            feedbackContainer.classList.add('hidden');
            successAnimation.classList.add('hidden');
            submitButton.classList.remove('hidden');
            retryButton.classList.add('hidden');

            displayQuestion(grammarIndex, 0);
        }

        // Function to display a specific question (Uses internal index 1-6)
        function displayQuestion(grammarIndex, questionIndex) {
            const questionContainer = document.getElementById(`question-container-${grammarIndex}`);
            const state = currentQuizState[grammarIndex];

             if (!questionContainer || !state || questionIndex >= state.totalQuestions) {
                console.error("Error displaying question for index:", grammarIndex, questionIndex);
                return;
            }

            const q = state.questions[questionIndex];
            if (q.type !== 'multiple-choice') {
                 console.error("Error: Question type is not multiple-choice.", q);
                 questionContainer.innerHTML = '<p class="text-red-600">ã‚¨ãƒ©ãƒ¼ï¼šå•é¡Œå½¢å¼ãŒæ­£ã—ãã‚ã‚Šã¾ã›ã‚“ã€‚</p>';
                 return;
            }

            let quizHtml = `<div class="question">`;
            const displayQuestionNum = questionIndex + 1;
            quizHtml += `<p class="font-medium mb-1">è³ªå• ${displayQuestionNum} / ${state.totalQuestions}:</p>`;

            const instructionText = 'æ­£ã—ã„é¸æŠè‚¢ã‚’é¸ã‚“ã§ãã ã•ã„ã€‚';
            quizHtml += `<p class="question-instruction">${instructionText}</p>`;
            quizHtml += `<p class="mb-3">${q.question}</p>`;

            const shuffledOptions = shuffleArray([...q.options]);
            shuffledOptions.forEach((option, optionIndex) => {
                const isChineseOption = /[\u3000-\u9faf\uFF00-\uFFEF]/.test(option);
                const optionClass = isChineseOption ? 'chinese-text' : '';
                const radioId = `q-${grammarIndex}-${questionIndex}-${optionIndex}`;
                quizHtml += `<div class="choice-option ml-2">
                                <input type="radio" id="${radioId}" name="q-${grammarIndex}-${questionIndex}" value="${option}" data-question-index="${questionIndex}">
                                <label for="${radioId}" class="${optionClass}">${option}</label>
                             </div>`;
            });

            quizHtml += `</div>`;
            questionContainer.innerHTML = quizHtml;

            const feedbackContainer = document.getElementById(`feedback-${grammarIndex}`);
            feedbackContainer.innerHTML = '';
            feedbackContainer.classList.add('hidden');
        }


        // Function to submit the answer for the current question (Uses internal index 1-6)
        function submitQuiz(grammarIndex) {
            const state = currentQuizState[grammarIndex];
             if (!state || state.completed) return;

            const currentQuestionIndex = state.currentQuestionIndex;
             if (currentQuestionIndex >= state.questions.length) {
                 console.error("Invalid current question index:", currentQuestionIndex);
                 return;
             }
            const q = state.questions[currentQuestionIndex];
            const feedbackContainer = document.getElementById(`feedback-${grammarIndex}`);
            const submitButton = document.getElementById(`submit-${grammarIndex}`);
            const retryButton = document.getElementById(`retry-${grammarIndex}`);
            const successAnimation = document.getElementById(`success-animation-${grammarIndex}`);

             if (!feedbackContainer || !submitButton || !retryButton || !successAnimation) {
                 console.error(`Quiz feedback/control elements not found for grammar index ${grammarIndex}`);
                 return;
             }

            const checkedRadio = document.querySelector(`input[name="q-${grammarIndex}-${currentQuestionIndex}"]:checked`);
            const userAnswer = checkedRadio ? checkedRadio.value : '';

            if (!userAnswer) {
                 feedbackContainer.innerHTML = `<span class="font-semibold">é¸æŠè‚¢ã‚’é¸ã‚“ã§ãã ã•ã„ã€‚</span>`;
                 feedbackContainer.classList.remove('hidden', 'feedback-correct');
                 feedbackContainer.classList.add('feedback-incorrect');
                 return;
            }

            const isCorrect = userAnswer.toLowerCase() === q.answer.toLowerCase();

            feedbackContainer.classList.remove('hidden', 'feedback-correct', 'feedback-incorrect');
            if (isCorrect) {
                feedbackContainer.innerHTML = `<span class="font-semibold">æ­£è§£ï¼</span> ğŸ‘`;
                feedbackContainer.classList.add('feedback-correct');

                state.currentQuestionIndex++;
                if (state.currentQuestionIndex < state.totalQuestions) {
                     setTimeout(() => {
                         if(currentQuizState[grammarIndex] && !currentQuizState[grammarIndex].completed) {
                             displayQuestion(grammarIndex, state.currentQuestionIndex);
                             feedbackContainer.classList.add('hidden');
                         }
                     }, 1000);
                } else {
                    state.completed = true;
                    feedbackContainer.innerHTML = '';
                    feedbackContainer.classList.add('hidden');
                    successAnimation.classList.remove('hidden');
                    submitButton.classList.add('hidden');
                    retryButton.classList.remove('hidden');
                }
            } else {
                const correctAnswerClass = /[\u3000-\u9faf\uFF00-\uFFEF]/.test(q.answer) ? 'chinese-text' : '';
                feedbackContainer.innerHTML = `<span class="font-semibold">ä¸æ­£è§£...</span> æ­£è§£ã¯: <strong class="${correctAnswerClass}">${q.answer}</strong><br>ã‚‚ã†ä¸€åº¦é¸æŠã—ã¦ã€Œå›ç­”ã™ã‚‹ã€ã‚’æŠ¼ã—ã¦ãã ã•ã„ã€‚`;
                feedbackContainer.classList.add('feedback-incorrect');
            }
        }

        // --- Event Listeners ---
        document.addEventListener('click', function(event) {
            if (event.target.classList.contains('clickable-sentence') || event.target.classList.contains('clickable-item')) {
                const audioSrc = event.target.getAttribute('data-audio');
                playAudio(audioSrc);
            }
        });

        // --- Initial Setup ---
        document.addEventListener('DOMContentLoaded', () => {
           showSection('table-of-contents');
        });

    </script>

</body>
</html>
```