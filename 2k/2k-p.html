<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ä¸­å›½èªæ–‡æ³•å­¦ç¿’</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://rsms.me/">
    <link rel="stylesheet" href="https://rsms.me/inter/inter.css">
    <style>
        /* Custom styles */
        body {
            /* Japanese Serif Font Stack (MS Mincho first) */
            font-family: 'MS Mincho', 'Hiragino Mincho ProN', 'Yu Mincho', serif;
            background-color: #f0f4f8; /* Light blue-gray background */
            -webkit-font-smoothing: antialiased; /* Smoother font rendering */
            -moz-osx-font-smoothing: grayscale;
        }
        /* Style for hidden sections */
        .grammar-section.hidden {
            display: none;
            opacity: 0;
        }
        /* Style for visible sections with fade-in */
        .grammar-section.visible {
            display: block;
            animation: fadeIn 0.5s ease-in-out forwards;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        /* Style for clickable sentences/items */
        .clickable-sentence, .clickable-item {
            cursor: pointer;
            color: #2563eb; /* Blue color */
            text-decoration: underline;
            transition: color 0.3s ease;
        }
        .clickable-sentence:hover, .clickable-item:hover {
            color: #1d4ed8; /* Darker blue on hover */
        }
        /* Basic button styling */
        .quiz-button, .nav-button { /* Added .nav-button */
            padding: 8px 16px;
            border-radius: 8px;
            color: white;
            border: none;
            cursor: pointer;
            transition: background-color 0.3s ease, transform 0.1s ease;
            font-weight: 500;
            margin-top: 10px;
            margin-right: 5px;
            font-family: inherit; /* Inherit body font (Japanese Serif) */
            text-decoration: none; /* Remove underline from link styled as button */
            display: inline-block; /* Ensure proper layout */
        }
        .quiz-button {
             background-color: #3b82f6; /* Blue button */
        }
        .quiz-button:hover {
            background-color: #2563eb;
        }
        .quiz-button:active, .nav-button:active {
             transform: scale(0.98); /* Slight shrink on click */
        }
        .quiz-button-secondary, .nav-button { /* Apply secondary style to nav button */
            background-color: #6b7280; /* Gray button */
        }
        .quiz-button-secondary:hover, .nav-button:hover {
            background-color: #4b5563;
        }
        /* Ensure radio/checkbox labels inherit font */
        label {
             font-family: inherit;
             line-height: 1.6; /* Improve spacing for radio buttons */
             display: inline-block; /* Ensure label aligns with radio */
             margin-left: 4px; /* Space between radio and label text */
        }
        /* Style radio buttons */
        input[type="radio"] {
             margin-right: 5px;
             vertical-align: middle; /* Align radio button with text */
        }
        /* Feedback styling */
        .feedback {
            margin-top: 10px;
            padding: 10px 12px;
            border-radius: 6px;
            font-weight: 500;
            border: 1px solid transparent;
            font-family: inherit; /* Ensure feedback uses Japanese Serif */
        }
        .feedback-correct {
            background-color: #dcfce7; /* Light green */
            color: #166534; /* Dark green */
            border-color: #86efac;
        }
        .feedback-incorrect {
            background-color: #fee2e2; /* Light red */
            color: #991b1b; /* Dark red */
            border-color: #fca5a5;
        }
        /* Add some animation to TOC items */
        #table-of-contents ul li a {
            transition: transform 0.2s ease, background-color 0.2s ease;
            display: block; /* Make the whole area clickable */
            padding: 12px 16px; /* Add padding */
            margin-bottom: 8px; /* Add space between items */
            background-color: #ffffff; /* White background */
            border-radius: 8px; /* Rounded corners */
            box-shadow: 0 2px 4px rgba(0,0,0,0.05); /* Subtle shadow */
            font-family: inherit; /* Ensure TOC uses Japanese Serif */
        }
        #table-of-contents ul li a:hover {
            transform: translateX(5px); /* Move slightly on hover */
            background-color: #eff6ff; /* Light blue background on hover */
        }
        /* Container styling */
        .container {
            max-width: 800px; /* Limit width on larger screens */
            margin: 20px auto; /* Center container */
            padding: 20px;
            background-color: #ffffff;
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            position: relative; /* Needed if using absolute positioning for back button */
        }
        /* Header styling */
        h1, h2, h3 {
            color: #1e3a8a; /* Dark blue header */
            font-family: inherit; /* Ensure headers use Japanese Serif */
        }
        h1 { /* Adjust h1 margin if back button is placed before it */
             margin-top: 0; /* Remove default top margin if needed */
        }
        h2 {
            border-bottom: 2px solid #93c5fd; /* Light blue underline */
            padding-bottom: 5px;
            margin-top: 20px;
            margin-bottom: 15px;
        }
        /* Explanation box styling */
        .explanation-box {
            background-color: #e0f2fe; /* Very light blue */
            border-left: 4px solid #3b82f6; /* Blue left border */
            padding: 15px;
            margin-bottom: 15px;
            border-radius: 8px;
        }
        .explanation-box h3 {
            font-weight: 600;
            color: #1e3a8a;
            margin-bottom: 8px;
        }
        /* Example styling */
        .example {
            margin-bottom: 12px;
            padding: 10px;
            background-color: #f9fafb; /* Very light gray */
            border-radius: 6px;
        }
         .example p {
            margin-bottom: 4px;
        }
        /* Styling for lists (numbers, days, etc.) */
        .list-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr)); /* Responsive grid */
            gap: 10px;
            margin-top: 10px;
        }
        .list-item {
            background-color: #ffffff;
            padding: 8px;
            border-radius: 4px;
            box-shadow: 0 1px 2px rgba(0,0,0,0.05);
            text-align: center;
        }
        .list-item .chinese-text {
            display: block; /* Ensure Chinese text is on its own line */
            margin-bottom: 2px;
        }
         .list-item .pinyin-text {
             font-size: 0.9em;
         }
        /* Chinese Text Font (SimSun first) */
        .chinese-text {
            font-size: 1.1em;
            font-weight: 500;
            font-family: 'SimSun', 'Songti SC', 'Noto Serif SC', serif;
        }
        /* Pinyin Font (Inter Sans-serif) */
        .pinyin-text {
            color: #6b7280; /* Gray for Pinyin */
            font-style: italic;
            font-family: 'Inter', sans-serif;
            font-size: 0.95em; /* Slightly smaller pinyin */
        }
        /* Japanese Text Font (Inherits from body - Japanese Serif) */
        .japanese-text {
            color: #374151; /* Darker gray for Japanese */
        }
        /* Quiz container styling */
        .quiz-section {
            margin-top: 25px;
            padding: 20px;
            background-color: #f3f4f6; /* Light gray background */
            border-radius: 8px;
        }
        .quiz-section h3 {
            font-weight: 600;
            margin-bottom: 15px;
            color: #1f2937; /* Dark gray */
        }
        .question-container { /* Container for the single question */
             min-height: 140px; /* Adjust height to prevent layout jumps */
             margin-bottom: 15px;
        }
        .question {
             padding: 15px;
             background-color: #ffffff;
             border-radius: 6px;
             box-shadow: 0 1px 3px rgba(0,0,0,0.05);
        }
        /* Style for question instructions */
        .question-instruction {
            font-size: 0.9em;
            color: #4b5563; /* Slightly darker gray */
            margin-bottom: 10px;
            font-style: italic;
            font-family: inherit; /* Ensure instructions use Japanese Serif */
        }
        /* Style for multiple choice options */
        .choice-option {
             margin-bottom: 8px; /* Space between options */
        }
        /* Success Animation */
        .success-message {
            padding: 15px;
            margin-top: 15px;
            background-color: #dcfce7;
            color: #166534;
            border: 1px solid #86efac;
            border-radius: 8px;
            text-align: center;
            font-size: 1.2em;
            font-weight: bold;
            animation: successPop 0.6s ease-out forwards;
            transform-origin: center;
            font-family: inherit; /* Ensure success message uses Japanese Serif */
        }
        .success-message.hidden {
            display: none;
            opacity: 0;
            transform: scale(0.5);
        }
        @keyframes successPop {
            0% { opacity: 0; transform: scale(0.5); }
            60% { opacity: 1; transform: scale(1.05); }
            100% { opacity: 1; transform: scale(1); }
        }

    </style>
</head>
<body class="p-4 md:p-8">

    <div class="container">
       <button type="button" onclick="window.location.href='2k.html'" class="nav-button mb-6 mr-0 mt-0">&lt; æˆ»ã‚‹</button>

        <h1 class="text-2xl md:text-3xl font-bold mb-6 text-center">ç¬¬2èª²ã€€æ–‡æ³•å­¦ç¿’</h1>

        <div id="table-of-contents">
            <h2 class="text-xl font-semibold mb-4">ç›®æ¬¡</h2>
            <ul class="list-none p-0">
                <li><a href="#" onclick="showSection('grammar-5'); return false;" class="text-blue-700 hover:text-blue-900">1. æ•°å­—ã®è¨€ã„æ–¹ï¼ˆ1ï½99ï¼‰</a></li>
                <li><a href="#" onclick="showSection('grammar-6'); return false;" class="text-blue-700 hover:text-blue-900">2. æ›œæ—¥ã®è¨€ã„æ–¹ (â€œæ˜ŸæœŸâ€)</a></li>
                <li><a href="#" onclick="showSection('grammar-7'); return false;" class="text-blue-700 hover:text-blue-900">3. æœˆã®è¨€ã„æ–¹ (â€œæœˆâ€)</a></li>
                <li><a href="#" onclick="showSection('grammar-8'); return false;" class="text-blue-700 hover:text-blue-900">4. æ—¥ã«ã¡ã®è¨€ã„æ–¹ (â€œå·â€)</a></li>
                <li><a href="#" onclick="showSection('grammar-9'); return false;" class="text-blue-700 hover:text-blue-900">5. â€œå—â€ã«ã¤ã„ã¦ (ç–‘å•)</a></li>
                <li><a href="#" onclick="showSection('grammar-10'); return false;" class="text-blue-700 hover:text-blue-900">6. åè©è¿°èªæ–‡ã«ã¤ã„ã¦</a></li>
                <li><a href="#" onclick="showSection('grammar-11'); return false;" class="text-blue-700 hover:text-blue-900">7. â€œçš„â€ã«ã¤ã„ã¦</a></li>
                <li><a href="#" onclick="showSection('grammar-12'); return false;" class="text-blue-700 hover:text-blue-900">8. â€œç¥â€¦â€¦å¿«ä¹â€ã«ã¤ã„ã¦</a></li>
            </ul>
        </div>

        <div id="grammar-content" class="mt-8">

            <div id="grammar-5" class="grammar-section hidden">
                <button onclick="showSection('table-of-contents'); return false;" class="quiz-button quiz-button-secondary mb-4">&lt; ç›®æ¬¡ã«æˆ»ã‚‹</button>
                <h2 class="text-xl font-semibold">1. æ•°å­—ã®è¨€ã„æ–¹ï¼ˆ1ï½99ï¼‰ã«ã¤ã„ã¦</h2> 
                <div class="explanation-box">
                    <h3>ãƒã‚¤ãƒ³ãƒˆ</h3>
                    <p>ä¸­å›½èªã®æ•°å­—ï¼ˆ1ï½99ï¼‰ã®åŸºæœ¬çš„ãªè¨€ã„æ–¹ã§ã™ã€‚11ï½19ã¯ã€Œå + ä¸€ï½ä¹ã€ã€20ï½99ã¯ã€ŒäºŒï½ä¹ + å + ï¼ˆä¸€ï½ä¹ï¼‰ã€ã¨ãªã‚Šã¾ã™ã€‚</p>
                    <p>ï¼ˆå„æ•°å­—ã‚’ã‚¯ãƒªãƒƒã‚¯ã™ã‚‹ã¨éŸ³å£°ãŒå†ç”Ÿã•ã‚Œã¾ã™ï¼‰</p>
                </div>
                <h3 class="font-semibold mt-4 mb-2">æ•°å­—ãƒªã‚¹ãƒˆï¼š</h3>
                <div class="example">
                    <div class="list-container">
                        <div class="list-item"><span class="chinese-text clickable-item" data-audio="sound/2k-p1-017-1.mp3">ä¸€</span><span class="pinyin-text">yÄ«</span></div>
                        <div class="list-item"><span class="chinese-text clickable-item" data-audio="sound/2k-p1-017-2.mp3">äºŒ</span><span class="pinyin-text">Ã¨r</span></div>
                        <div class="list-item"><span class="chinese-text clickable-item" data-audio="sound/2k-p1-017-3.mp3">ä¸‰</span><span class="pinyin-text">sÄn</span></div>
                        <div class="list-item"><span class="chinese-text clickable-item" data-audio="sound/2k-p1-017-4.mp3">å››</span><span class="pinyin-text">sÃ¬</span></div>
                        <div class="list-item"><span class="chinese-text clickable-item" data-audio="sound/12k-p1-017-5.mp3">äº”</span><span class="pinyin-text">wÇ”</span></div>
                        <div class="list-item"><span class="chinese-text clickable-item" data-audio="sound/2k-p1-017-6.mp3">å…­</span><span class="pinyin-text">liÃ¹</span></div>
                        <div class="list-item"><span class="chinese-text clickable-item" data-audio="sound/2k-p1-017-7.mp3">ä¸ƒ</span><span class="pinyin-text">qÄ«</span></div>
                        <div class="list-item"><span class="chinese-text clickable-item" data-audio="sound/2k-p1-017-8.mp3">å…«</span><span class="pinyin-text">bÄ</span></div>
                        <div class="list-item"><span class="chinese-text clickable-item" data-audio="sound/2k-p1-017-9.mp3">ä¹</span><span class="pinyin-text">jiÇ”</span></div>
                        <div class="list-item"><span class="chinese-text clickable-item" data-audio="sound/2k-p1-017-10.mp3">å</span><span class="pinyin-text">shÃ­</span></div>
                        <div class="list-item"><span class="chinese-text clickable-item" data-audio="sound/2k-p1-017-11.mp3">åä¸€</span><span class="pinyin-text">shÃ­yÄ«</span></div>
                        <div class="list-item"><span class="chinese-text clickable-item" data-audio="sound/2k-p1-017-17.mp3">åä¸ƒ</span><span class="pinyin-text">shÃ­qÄ«</span></div>
                        <div class="list-item"><span class="chinese-text clickable-item" data-audio="sound/2k-p1-017-21.mp3">äºŒåä¸€</span><span class="pinyin-text">Ã¨rshÃ­yÄ«</span></div>
                        <div class="list-item"><span class="chinese-text clickable-item" data-audio="sound/2k-p1-017-30.mp3">ä¸‰å</span><span class="pinyin-text">sÄnshÃ­</span></div>
                        <div class="list-item"><span class="chinese-text clickable-item" data-audio="sound/2k-p1-017-49.mp3">å››åä¹</span><span class="pinyin-text">sÃ¬shÃ­jiÇ”</span></div>
                        <div class="list-item"><span class="chinese-text clickable-item" data-audio="sound/2k-p1-017-58.mp3">äº”åå…«</span><span class="pinyin-text">wÇ”shÃ­bÄ</span></div>
                        <div class="list-item"><span class="chinese-text clickable-item" data-audio="sound/2k-p1-017-63.mp3">å…­åä¸‰</span><span class="pinyin-text">liÃ¹shÃ­sÄn</span></div>
                        <div class="list-item"><span class="chinese-text clickable-item" data-audio="sound/2k-p1-017-77.mp3">ä¸ƒåä¸ƒ</span><span class="pinyin-text">qÄ«shÃ­qÄ«</span></div>
                        <div class="list-item"><span class="chinese-text clickable-item" data-audio="sound/2k-p1-017-82.mp3">å…«åäºŒ</span><span class="pinyin-text">bÄshÃ­Ã¨r</span></div>
                        <div class="list-item"><span class="chinese-text clickable-item" data-audio="sound/2k-p1-017-99.mp3">ä¹åä¹</span><span class="pinyin-text">jiÇ”shÃ­jiÇ”</span></div>
                    </div>
                 </div>
                <div class="quiz-section">
                    <h3>ãƒŸãƒ‹ç·´ç¿’</h3>
                    <div id="question-container-5" class="question-container"></div>
                    <div id="feedback-5" class="feedback hidden"></div>
                    <div id="success-animation-5" class="success-message hidden">æ•°å­—ã‚‚ãƒãƒƒãƒãƒªï¼ã™ã”ã„ï¼ğŸ’¯</div>
                    <button id="submit-5" class="quiz-button" onclick="submitQuiz(5)">å›ç­”ã™ã‚‹</button> 
                    <button id="retry-5" class="quiz-button quiz-button-secondary hidden" onclick="loadQuiz(5)">ã‚‚ã†ä¸€åº¦æŒ‘æˆ¦</button> 
                </div>
            </div>

            <div id="grammar-6" class="grammar-section hidden">
                <button onclick="showSection('table-of-contents'); return false;" class="quiz-button quiz-button-secondary mb-4">ç›®æ¬¡ã«æˆ»ã‚‹</button>
                <h2 class="text-xl font-semibold">2. æ›œæ—¥ã®è¨€ã„æ–¹ (â€œæ˜ŸæœŸâ€)</h2> 
                 <div class="explanation-box">
                    <h3>ãƒã‚¤ãƒ³ãƒˆ</h3>
                    <p>æ›œæ—¥ã¯ã€Œæ˜ŸæœŸ (xÄ«ngqÄ«)ã€ã®å¾Œã‚ã«æ•°å­—ï¼ˆä¸€ï½å…­ï¼‰ã‚’ã¤ã‘ã¾ã™ã€‚æ—¥æ›œæ—¥ã¯ã€Œæ˜ŸæœŸå¤© (xÄ«ngqÄ«tiÄn)ã€ã¾ãŸã¯ã€Œæ˜ŸæœŸæ—¥ (xÄ«ngqÄ«rÃ¬)ã€ã¨è¨€ã„ã¾ã™ã€‚ã€Œä½•æ›œæ—¥ï¼Ÿã€ã¨å°‹ã­ã‚‹æ™‚ã¯ã€Œæ˜ŸæœŸå‡  (xÄ«ngqÄ«jÇ)ï¼Ÿã€ã‚’ä½¿ã„ã¾ã™ã€‚</p>
                     <p>ï¼ˆå„æ›œæ—¥ã‚’ã‚¯ãƒªãƒƒã‚¯ã™ã‚‹ã¨éŸ³å£°ãŒå†ç”Ÿã•ã‚Œã¾ã™ï¼‰</p>
                </div>
                <h3 class="font-semibold mt-4 mb-2">æ›œæ—¥ãƒªã‚¹ãƒˆï¼š</h3>
                 <div class="example">
                     <div class="list-container">
                         <div class="list-item"><span class="japanese-text">æœˆæ›œæ—¥</span><span class="chinese-text clickable-item" data-audio="sound/2k-p2-018-xingqiyi.mp3">æ˜ŸæœŸä¸€</span><span class="pinyin-text">xÄ«ngqÄ«yÄ«</span></div>
                         <div class="list-item"><span class="japanese-text">ç«æ›œæ—¥</span><span class="chinese-text clickable-item" data-audio="sound/2k-p2-018-xingqier.mp3">æ˜ŸæœŸäºŒ</span><span class="pinyin-text">xÄ«ngqÄ«Ã¨r</span></div>
                         <div class="list-item"><span class="japanese-text">æ°´æ›œæ—¥</span><span class="chinese-text clickable-item" data-audio="sound/2k-p2-018-xingqisan.mp3">æ˜ŸæœŸä¸‰</span><span class="pinyin-text">xÄ«ngqÄ«sÄn</span></div>
                         <div class="list-item"><span class="japanese-text">æœ¨æ›œæ—¥</span><span class="chinese-text clickable-item" data-audio="sound/2k-p2-018-xingqisi.mp3">æ˜ŸæœŸå››</span><span class="pinyin-text">xÄ«ngqÄ«sÃ¬</span></div>
                         <div class="list-item"><span class="japanese-text">é‡‘æ›œæ—¥</span><span class="chinese-text clickable-item" data-audio="sound/2k-p2-018-xingqiwu.mp3">æ˜ŸæœŸäº”</span><span class="pinyin-text">xÄ«ngqÄ«wÇ”</span></div>
                         <div class="list-item"><span class="japanese-text">åœŸæ›œæ—¥</span><span class="chinese-text clickable-item" data-audio="sound/2k-p2-018-xingqiliu.mp3">æ˜ŸæœŸå…­</span><span class="pinyin-text">xÄ«ngqÄ«liÃ¹</span></div>
                         <div class="list-item"><span class="japanese-text">æ—¥æ›œæ—¥</span><span class="chinese-text clickable-item" data-audio="sound/2k-p2-018-xingqitian.mp3">æ˜ŸæœŸå¤©</span><span class="pinyin-text">xÄ«ngqÄ«tiÄn</span></div>
<div class="list-item"><span class="japanese-text">æ—¥æ›œæ—¥</span><span class="chinese-text clickable-item" data-audio="sound/2k-p2-018-xingqiri.mp3">æ˜ŸæœŸæ—¥</span><span class="pinyin-text">xÄ«ngqÄ«rÃ¬</span></div>
                         <div class="list-item"><span class="japanese-text">ä½•æ›œæ—¥</span><span class="chinese-text clickable-item" data-audio="sound/2k-p2-018-xingqiji.mp3">æ˜ŸæœŸå‡ </span><span class="pinyin-text">xÄ«ngqÄ«jÇ</span></div>
                     </div>
                 </div>
                <div class="quiz-section">
                    <h3>ãƒŸãƒ‹ç·´ç¿’</h3>
                    <div id="question-container-6" class="question-container"></div>
                    <div id="feedback-6" class="feedback hidden"></div>
                    <div id="success-animation-6" class="success-message hidden">æ›œæ—¥ã‚‚å®Œç’§ï¼ç´ æ™´ã‚‰ã—ã„ï¼ğŸ“…</div>
                    <button id="submit-6" class="quiz-button" onclick="submitQuiz(6)">å›ç­”ã™ã‚‹</button> 
                    <button id="retry-6" class="quiz-button quiz-button-secondary hidden" onclick="loadQuiz(6)">ã‚‚ã†ä¸€åº¦æŒ‘æˆ¦</button> 
                </div>
            </div>

             <div id="grammar-7" class="grammar-section hidden">
                <button onclick="showSection('table-of-contents'); return false;" class="quiz-button quiz-button-secondary mb-4">ç›®æ¬¡ã«æˆ»ã‚‹</button>
                <h2 class="text-xl font-semibold">3. æœˆã®è¨€ã„æ–¹ (â€œæœˆâ€)</h2> 
                 <div class="explanation-box">
                    <h3>ãƒã‚¤ãƒ³ãƒˆ</h3>
                    <p>æœˆã¯æ•°å­—ã®å¾Œã‚ã«ã€Œæœˆ (yuÃ¨)ã€ã‚’ã¤ã‘ã¾ã™ã€‚</p>
                     <p>ï¼ˆå„æœˆã‚’ã‚¯ãƒªãƒƒã‚¯ã™ã‚‹ã¨éŸ³å£°ãŒå†ç”Ÿã•ã‚Œã¾ã™ï¼‰</p>
                </div>
                <h3 class="font-semibold mt-4 mb-2">æœˆãƒªã‚¹ãƒˆï¼š</h3>
                 <div class="example">
                     <div class="list-container">
                         <div class="list-item"><span class="chinese-text clickable-item" data-audio="sound/2k-p2-019-yiyue.mp3">ä¸€æœˆ</span><span class="pinyin-text">yÄ«yuÃ¨</span></div>
                         <div class="list-item"><span class="chinese-text clickable-item" data-audio="sound/2k-p2-019-eryue.mp3">äºŒæœˆ</span><span class="pinyin-text">Ã¨ryuÃ¨</span></div>
                         <div class="list-item"><span class="chinese-text clickable-item" data-audio="sound/2k-p2-019-sanyue.mp3">ä¸‰æœˆ</span><span class="pinyin-text">sÄnyuÃ¨</span></div>
                         <div class="list-item"><span class="chinese-text clickable-item" data-audio="sound/2k-p2-019-siyue.mp3">å››æœˆ</span><span class="pinyin-text">sÃ¬yuÃ¨</span></div>
                         <div class="list-item"><span class="chinese-text clickable-item" data-audio="sound/2k-p2-019-wuyue.mp3">äº”æœˆ</span><span class="pinyin-text">wÇ”yuÃ¨</span></div>
                         <div class="list-item"><span class="chinese-text clickable-item" data-audio="sound/2k-p2-019-liuyue.mp3">å…­æœˆ</span><span class="pinyin-text">liÃ¹yuÃ¨</span></div>
                         <div class="list-item"><span class="chinese-text clickable-item" data-audio="sound/2k-p2-019-qiyue.mp3">ä¸ƒæœˆ</span><span class="pinyin-text">qÄ«yuÃ¨</span></div>
                         <div class="list-item"><span class="chinese-text clickable-item" data-audio="sound/2k-p2-019-bayue.mp3">å…«æœˆ</span><span class="pinyin-text">bÄyuÃ¨</span></div>
                         <div class="list-item"><span class="chinese-text clickable-item" data-audio="sound/2k-p2-019-jiuyue.mp3">ä¹æœˆ</span><span class="pinyin-text">jiÇ”yuÃ¨</span></div>
                         <div class="list-item"><span class="chinese-text clickable-item" data-audio="sound/2k-p2-019-shiyue.mp3">åæœˆ</span><span class="pinyin-text">shÃ­yuÃ¨</span></div>
                         <div class="list-item"><span class="chinese-text clickable-item" data-audio="sound/2k-p2-019-shiyiyue.mp3">åä¸€æœˆ</span><span class="pinyin-text">shÃ­yÄ«yuÃ¨</span></div>
                         <div class="list-item"><span class="chinese-text clickable-item" data-audio="sound/2k-p2-019-shieryue.mp3">åäºŒæœˆ</span><span class="pinyin-text">shÃ­Ã¨ryuÃ¨</span></div>
                     </div>
                 </div>
                <div class="quiz-section">
                    <h3>ãƒŸãƒ‹ç·´ç¿’</h3>
                    <div id="question-container-7" class="question-container"></div>
                    <div id="feedback-7" class="feedback hidden"></div>
                    <div id="success-animation-7" class="success-message hidden">æœˆã®è¨€ã„æ–¹ã‚‚OKï¼ğŸ—“ï¸</div>
                    <button id="submit-7" class="quiz-button" onclick="submitQuiz(7)">å›ç­”ã™ã‚‹</button> 
                    <button id="retry-7" class="quiz-button quiz-button-secondary hidden" onclick="loadQuiz(7)">ã‚‚ã†ä¸€åº¦æŒ‘æˆ¦</button> 
                </div>
            </div>

             <div id="grammar-8" class="grammar-section hidden">
                <button onclick="showSection('table-of-contents'); return false;" class="quiz-button quiz-button-secondary mb-4">ç›®æ¬¡ã«æˆ»ã‚‹</button>
                <h2 class="text-xl font-semibold">4. æ—¥ã«ã¡ã®è¨€ã„æ–¹ (â€œå·â€)</h2> 
                 <div class="explanation-box">
                    <h3>ãƒã‚¤ãƒ³ãƒˆ</h3>
                    <p>æ—¥ã«ã¡ã¯ã€è©±ã—è¨€è‘‰ã§ã¯æ•°å­—ã®å¾Œã‚ã«ã€Œå· (hÃ o)ã€ã‚’ã¤ã‘ã¾ã™ã€‚ï¼ˆæ›¸ãè¨€è‘‰ã§ã¯ã€Œæ—¥ (rÃ¬)ã€ã‚‚ä½¿ã‚ã‚Œã¾ã™ï¼‰ã€‚ã€Œä½•æ—¥ï¼Ÿã€ã¨å°‹ã­ã‚‹æ™‚ã¯ã€Œå‡ å· (jÇ hÃ o)ï¼Ÿã€ã‚’ä½¿ã„ã¾ã™ã€‚</p>
                     <p>ï¼ˆå„æ—¥ä»˜ã‚’ã‚¯ãƒªãƒƒã‚¯ã™ã‚‹ã¨éŸ³å£°ãŒå†ç”Ÿã•ã‚Œã¾ã™ï¼‰</p>
                </div>
                <h3 class="font-semibold mt-4 mb-2">æ—¥ä»˜ã®ä¾‹ï¼š</h3>
                 <div class="example">
                     <div class="list-container">
                         <div class="list-item"><span class="japanese-text">1æœˆ5æ—¥</span><span class="chinese-text clickable-item" data-audio="sound/2k-p2-020-yiyuewuhao.mp3">ä¸€æœˆäº”å·</span><span class="pinyin-text">yÄ«yuÃ¨ wÇ”hÃ o</span></div>
                         <div class="list-item"><span class="japanese-text">3æœˆ8æ—¥</span><span class="chinese-text clickable-item" data-audio="sound/2k-p2-020-sanyuebahao.mp3">ä¸‰æœˆå…«å·</span><span class="pinyin-text">sÄnyuÃ¨ bÄhÃ o</span></div>
                         <div class="list-item"><span class="japanese-text">6æœˆ7æ—¥</span><span class="chinese-text clickable-item" data-audio="sound/2k-p2-020-liuyueqihao.mp3">å…­æœˆä¸ƒå·</span><span class="pinyin-text">liÃ¹yuÃ¨ qÄ«hÃ o</span></div>
                         <div class="list-item"><span class="japanese-text">9æœˆ4æ—¥</span><span class="chinese-text clickable-item" data-audio="sound/2k-p2-020-jiuyuesihao.mp3">ä¹æœˆå››å·</span><span class="pinyin-text">jiÇ”yuÃ¨ sÃ¬hÃ o</span></div>
                         <div class="list-item"><span class="japanese-text">12æœˆ10æ—¥</span><span class="chinese-text clickable-item" data-audio="sound/2k-p2-020-shieryueshihao.mp3">åäºŒæœˆåå·</span><span class="pinyin-text">shÃ­Ã¨ryuÃ¨ shÃ­hÃ o</span></div>
                         <div class="list-item"><span class="japanese-text">ä½•æœˆä½•æ—¥</span><span class="chinese-text clickable-item" data-audio="sound/2k-p2-020-jiyuejihao.mp3">å‡ æœˆå‡ å·</span><span class="pinyin-text">jÇyuÃ¨ jÇhÃ o</span></div>
                     </div>
                 </div>
                <div class="quiz-section">
                    <h3>ãƒŸãƒ‹ç·´ç¿’</h3>
                    <div id="question-container-8" class="question-container"></div>
                    <div id="feedback-8" class="feedback hidden"></div>
                    <div id="success-animation-8" class="success-message hidden">æ—¥ä»˜ã‚‚ãƒãƒƒãƒãƒªã§ã™ã­ï¼ğŸ‘</div>
                    <button id="submit-8" class="quiz-button" onclick="submitQuiz(8)">å›ç­”ã™ã‚‹</button> 
                    <button id="retry-8" class="quiz-button quiz-button-secondary hidden" onclick="loadQuiz(8)">ã‚‚ã†ä¸€åº¦æŒ‘æˆ¦</button> 
                </div>
            </div>

            <div id="grammar-9" class="grammar-section hidden">
                <button onclick="showSection('table-of-contents'); return false;" class="quiz-button quiz-button-secondary mb-4">ç›®æ¬¡ã«æˆ»ã‚‹</button>
                <h2 class="text-xl font-semibold">5. â€œå—â€ã«ã¤ã„ã¦ (ç–‘å•)</h2> 
                <div class="explanation-box">
                    <h3>ãƒã‚¤ãƒ³ãƒˆ</h3>
                    <p><strong>æ„å‘³ï¼š</strong>â€œå— (ma)â€ ã¯æ–‡æœ«ã«ç½®ã„ã¦ã€ã€Œï½ã§ã™ã‹ï¼Ÿã€ã¨ã„ã†ç–‘å•ã‚’è¡¨ã™åŠ©è©ã§ã™ã€‚</p>
                    <p><strong>ä½¿ã„æ–¹ï¼š</strong>è‚¯å®šæ–‡ã®æœ€å¾Œã«ã€Œå—ã€ã‚’ã¤ã‘ã‚‹ã¨ã€ç°¡å˜ã«ç–‘å•æ–‡ã‚’ä½œã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚</p>
                    <p><strong>å¿œç­”ï¼š</strong>ã€Œå—ã€ã§èã‹ã‚ŒãŸè³ªå•ã«ã¯ã€é€šå¸¸ã€Œæ˜¯ (ã¯ã„)ã€ã¾ãŸã¯ã€Œä¸æ˜¯ (ã„ã„ãˆ)ã€ã§ç­”ãˆã¾ã™ã€‚</p>
                </div>
                <h3 class="font-semibold mt-4 mb-2">ä¾‹æ–‡ï¼š</h3>
                <div class="example">
                    <p class="chinese-text"> Aï¼š<span class="clickable-sentence" data-audio="sound/2k-p-3-1.mp3">ä»Šå¤©æ˜¯æ˜ŸæœŸå¤©å—ï¼Ÿ</span></p>
                    <p class="pinyin-text">A: JÄ«ntiÄn shÃ¬ xÄ«ngqÄ«tiÄn ma? </p>
                    <p class="japanese-text">A: ä»Šæ—¥ã¯æ—¥æ›œæ—¥ã§ã™ã‹ã€‚</p>
                    
                </div>
<div class="example">
                    <p class="chinese-text"> Bï¼š<span class="clickable-sentence" data-audio="sound/2k-p-3-2.mp3">æ˜¯ï¼Œä»Šå¤©æ˜¯æ˜ŸæœŸå¤©ã€‚</span> </p>
                    <p class="pinyin-text">B: ShÃ¬, jÄ«ntiÄn shÃ¬ xÄ«ngqÄ«tiÄn.</p>
                    <p class="japanese-text">B: ã¯ã„ã€ä»Šæ—¥ã¯æ—¥æ›œæ—¥ã§ã™ã€‚</p>
                     
                </div>
                <div class="example">
                    <p class="chinese-text"> Aï¼š<span class="clickable-sentence" data-audio="sound/2k-p-3-3.mp3">ä»Šå¤©æ˜¯11æœˆ12å·å—ï¼Ÿ</span></p>
                    <p class="pinyin-text">A: JÄ«ntiÄn shÃ¬ shÃ­yÄ« yuÃ¨ shÃ­Ã¨r hÃ o ma?</p>
                    <p class="japanese-text">A: ä»Šæ—¥ã¯11æœˆ12æ—¥ã§ã™ã‹ã€‚</p>
                   </div>
<div class="example">
                    <p class="chinese-text">Bï¼š<span class="clickable-sentence" data-audio="sound/2k-p-3-4.mp3">ä¸æ˜¯ï¼Œä»Šå¤©æ˜¯11æœˆ13å·ã€‚</span> </p>
                    <p class="pinyin-text">B: BÃºshÃ¬, jÄ«ntiÄn shÃ¬ shÃ­yÄ« yuÃ¨ shÃ­sÄn hÃ o.</p>
                    <p class="japanese-text">B: ã„ã„ãˆã€ä»Šæ—¥ã¯11æœˆ13æ—¥ã§ã™ã€‚</p>
                  
                </div>
                <div class="quiz-section">
                    <h3>ãƒŸãƒ‹ç·´ç¿’</h3>
                    <div id="question-container-9" class="question-container"></div>
                    <div id="feedback-9" class="feedback hidden"></div>
                    <div id="success-animation-9" class="success-message hidden">ç–‘å•æ–‡ã‚‚ãŠæ‰‹ã®ç‰©ï¼â“</div>
                    <button id="submit-9" class="quiz-button" onclick="submitQuiz(9)">å›ç­”ã™ã‚‹</button> 
                    <button id="retry-9" class="quiz-button quiz-button-secondary hidden" onclick="loadQuiz(9)">ã‚‚ã†ä¸€åº¦æŒ‘æˆ¦</button> 
                </div>
            </div>

             <div id="grammar-10" class="grammar-section hidden">
                <button onclick="showSection('table-of-contents'); return false;" class="quiz-button quiz-button-secondary mb-4">ç›®æ¬¡ã«æˆ»ã‚‹</button>
                <h2 class="text-xl font-semibold">6. åè©è¿°èªæ–‡ã«ã¤ã„ã¦</h2> 
                <div class="explanation-box">
                    <h3>ãƒã‚¤ãƒ³ãƒˆ</h3>
                    <p><strong>å®šç¾©ï¼š</strong>åè©è¿°èªæ–‡ã¨ã¯ã€åè©ï¼ˆå¥ï¼‰ãŒç›´æ¥è¿°èªã«ãªã‚‹æ–‡ã®ã“ã¨ã§ã™ã€‚</p>
                    <p><strong>ä½¿ã„æ–¹ï¼š</strong>ã€Œä¸»èª + è¿°èªï¼ˆåè©ï¼‰ã€ã®å½¢ã‚’å–ã‚Šã¾ã™ã€‚ç‰¹ã«æ—¥ä»˜ã€æ›œæ—¥ã€å¹´é½¢ã€ä¾¡æ ¼ãªã©ã€æ•°å­—ã¨é–¢é€£ã™ã‚‹åè©ãŒè¿°èªã«ãªã‚‹ã“ã¨ãŒå¤šã„ã§ã™ã€‚ã“ã®å ´åˆã€å‹•è©ã®ã€Œæ˜¯ã€ã¯é€šå¸¸çœç•¥ã•ã‚Œã¾ã™ã€‚</p>
                </div>
                <h3 class="font-semibold mt-4 mb-2">ä¾‹æ–‡ï¼š</h3>
                <div class="example">
                    <p class="chinese-text"><span class="clickable-sentence" data-audio="sound/2k-p-4-1.mp3">ä»Šå¤©æ˜ŸæœŸä¸‰ã€‚</span></p>
                    <p class="pinyin-text">JÄ«ntiÄn xÄ«ngqÄ«sÄn.</p>
                    <p class="japanese-text">ä»Šæ—¥ã¯æ°´æ›œæ—¥ã§ã™ã€‚</p>
                </div>
                 <div class="example">
                    <p class="chinese-text"> Aï¼š<span class="clickable-sentence" data-audio="sound/2k-p-4-2.mp3">ä»Šå¤©å‡ æœˆå‡ å·ï¼Ÿ</span></p>
                    <p class="pinyin-text">A: JÄ«ntiÄn jÇyuÃ¨ jÇhÃ o?</p>
                    <p class="japanese-text">A: ä»Šæ—¥ã¯ä½•æœˆä½•æ—¥ã§ã™ã‹ã€‚</p>
                     </div>
<div class="example">
                    <p class="chinese-text"> Bï¼š<span class="clickable-sentence" data-audio="sound/2k-p-4-3.mp3">ä»Šå¤©9æœˆ10å·ã€‚</span> </p>
                    <p class="pinyin-text">B: JÄ«ntiÄn jiÇ”yuÃ¨ shÃ­hÃ o.</p>
                    <p class="japanese-text">B: ä»Šæ—¥ã¯9æœˆ10æ—¥ã§ã™ã€‚</p>
                    
                </div>
                <div class="quiz-section">
                    <h3>ãƒŸãƒ‹ç·´ç¿’</h3>
                    <div id="question-container-10" class="question-container"></div>
                    <div id="feedback-10" class="feedback hidden"></div>
                    <div id="success-animation-10" class="success-message hidden">åè©è¿°èªæ–‡ã€ç†è§£ã—ã¾ã—ãŸã­ï¼âœ…</div>
                    <button id="submit-10" class="quiz-button" onclick="submitQuiz(10)">å›ç­”ã™ã‚‹</button> 
                    <button id="retry-10" class="quiz-button quiz-button-secondary hidden" onclick="loadQuiz(10)">ã‚‚ã†ä¸€åº¦æŒ‘æˆ¦</button> 
                </div>
            </div>

             <div id="grammar-11" class="grammar-section hidden">
                <button onclick="showSection('table-of-contents'); return false;" class="quiz-button quiz-button-secondary mb-4">ç›®æ¬¡ã«æˆ»ã‚‹</button>
                <h2 class="text-xl font-semibold">7. â€œçš„â€ã«ã¤ã„ã¦</h2> 
                <div class="explanation-box">
                    <h3>ãƒã‚¤ãƒ³ãƒˆ</h3>
                    <p><strong>æ„å‘³ï¼š</strong>â€œçš„ (de)â€ ã¯ã€æ—¥æœ¬èªã®åŠ©è©ã€Œã®ã€ã«ä¼¼ã¦ãŠã‚Šã€ä¿®é£¾èªã¨è¢«ä¿®é£¾èªï¼ˆåè©ï¼‰ã‚’ã¤ãªãå½¹å‰²ã‚’ã—ã¾ã™ã€‚ã€Œï½ã®ï½ã€ã¨ã„ã†é–¢ä¿‚ã‚’è¡¨ã—ã¾ã™ã€‚</p>
                    <p><strong>ä½¿ã„æ–¹ï¼š</strong>ä¿®é£¾èª + çš„ + åè©</p>
                    <p><strong>æ³¨æ„ï¼š</strong>ä¿®é£¾èªãŒäººç§°ä»£åè©ï¼ˆæˆ‘, ä½ , ä»– ãªã©ï¼‰ã§ã€å¾Œã‚ã«æ¥ã‚‹åè©ãŒè¦ªæ—åç§°ï¼ˆå¦ˆå¦ˆ, å“¥å“¥ ãªã©ï¼‰ã‚„æ‰€å±å›£ä½“ãƒ»å ´æ‰€ï¼ˆå­¦æ ¡, å…¬å¸ ãªã©ï¼‰ã‚’è¡¨ã™å ´åˆã€â€œçš„â€ã¯çœç•¥ã•ã‚Œã‚‹ã“ã¨ãŒå¤šã„ã§ã™ã€‚(ä¾‹ï¼šæˆ‘å¦ˆå¦ˆã€æˆ‘ä»¬å­¦æ ¡)</p>
                    <p><strong>èªå½™ï¼š</strong>å¦ˆå¦ˆ(mÄma)ï¼æ¯, å­¦ç”Ÿ(xuÃ©shÄ“ng)ï¼å­¦ç”Ÿ, ç”Ÿæ—¥(shÄ“ngrÃ¬)ï¼èª•ç”Ÿæ—¥, çˆ±çŸ¥æ·‘å¾·å¤§å­¦(Ã€izhÄ« shÅ«dÃ© dÃ xuÃ©)ï¼æ„›çŸ¥æ·‘å¾³å¤§å­¦</p>
                </div>
                <h3 class="font-semibold mt-4 mb-2">ä¾‹æ–‡ï¼š</h3>
                <div class="example">
                    <p class="chinese-text"><span class="clickable-sentence" data-audio="sound/2k-p-5-1.mp3">æˆ‘å¦ˆå¦ˆçš„ç”Ÿæ—¥æ˜¯7æœˆ3å·ã€‚</span></p>
                    <p class="pinyin-text">WÇ’ mÄma de shÄ“ngrÃ¬ shÃ¬ qÄ« yuÃ¨ sÄn hÃ o.</p>
                    <p class="japanese-text">ç§ã®ãŠæ¯ã•ã‚“ã®èª•ç”Ÿæ—¥ã¯7æœˆ3æ—¥ã§ã™ã€‚</p>
                </div>
                 <div class="example">
                    <p class="chinese-text"><span class="clickable-sentence" data-audio="sound/2k-p-5-2.mp3">æˆ‘æ˜¯çˆ±çŸ¥æ·‘å¾·å¤§å­¦çš„å­¦ç”Ÿã€‚</span></p>
                    <p class="pinyin-text">WÇ’ shÃ¬ Ã€izhÄ« shÅ«dÃ© dÃ xuÃ© de xuÃ©shÄ“ng.</p>
                    <p class="japanese-text">ç§ã¯æ„›çŸ¥æ·‘å¾³å¤§å­¦ã®å­¦ç”Ÿã§ã™ã€‚</p>
                </div>
                <div class="quiz-section">
                    <h3>ãƒŸãƒ‹ç·´ç¿’</h3>
                    <div id="question-container-11" class="question-container"></div>
                    <div id="feedback-11" class="feedback hidden"></div>
                    <div id="success-animation-11" class="success-message hidden">â€œçš„â€ã®ä½¿ã„æ–¹ã‚‚ãƒã‚¹ã‚¿ãƒ¼ï¼ğŸ‰</div>
                    <button id="submit-11" class="quiz-button" onclick="submitQuiz(11)">å›ç­”ã™ã‚‹</button> 
                    <button id="retry-11" class="quiz-button quiz-button-secondary hidden" onclick="loadQuiz(11)">ã‚‚ã†ä¸€åº¦æŒ‘æˆ¦</button> {
                </div>
            </div>

             <div id="grammar-12" class="grammar-section hidden">
                <button onclick="showSection('table-of-contents'); return false;" class="quiz-button quiz-button-secondary mb-4">ç›®æ¬¡ã«æˆ»ã‚‹</button>
                <h2 class="text-xl font-semibold">8. â€œç¥â€¦â€¦å¿«ä¹â€ã«ã¤ã„ã¦</h2> 
                 <div class="explanation-box">
                    <h3>ãƒã‚¤ãƒ³ãƒˆ</h3>
                    <p><strong>æ„å‘³ï¼š</strong>â€œç¥â€¦â€¦å¿«ä¹ (zhÃ¹...kuÃ ilÃ¨)â€ ã¯ã€ã€Œï¼ˆï½ã•ã‚“ã®ï¼‰ï½ãŠã‚ã§ã¨ã†ï¼ã€ã¨ã„ã†ãŠç¥ã„ã®æ°—æŒã¡ã‚’è¡¨ã™æ±ºã¾ã‚Šæ–‡å¥ã§ã™ã€‚</p>
                    <p><strong>ä½¿ã„æ–¹ï¼š</strong>ã€Œç¥ + äººç§°ä»£åè©/åå‰ï¼ˆçœç•¥å¯ï¼‰ + ç¥æ—¥/è¨˜å¿µæ—¥ + å¿«ä¹ï¼ã€ã®å½¢ã§ä½¿ã„ã¾ã™ã€‚</p>
                     <p><strong>èªå½™ï¼š</strong>æ–°å¹´(XÄ«nniÃ¡n)ï¼æ–°å¹´, ç”Ÿæ—¥(shÄ“ngrÃ¬)ï¼èª•ç”Ÿæ—¥</p>
                </div>
                <h3 class="font-semibold mt-4 mb-2">ä¾‹æ–‡ï¼š</h3>
                <div class="example">
                    <p class="chinese-text"><span class="clickable-sentence" data-audio="sound/2k-p-6-1.mp3">ï¼ˆç¥ææ˜ï¼‰ç”Ÿæ—¥å¿«ä¹ï¼</span></p>
                    <p class="pinyin-text">(ZhÃ¹ LÇ MÃ­ng) shÄ“ngrÃ¬ kuÃ ilÃ¨!</p>
                    <p class="japanese-text">ï¼ˆææ˜ã•ã‚“ï¼‰ãŠèª•ç”Ÿæ—¥ãŠã‚ã§ã¨ã†ã”ã–ã„ã¾ã™ï¼</p>
                </div>
                 <div class="example">
                    <p class="chinese-text"><span class="clickable-sentence" data-audio="sound/2k-p-6-2.mp3">ï¼ˆç¥ä½ ï¼‰æ–°å¹´å¿«ä¹ï¼</span></p>
                    <p class="pinyin-text">(ZhÃ¹ nÇ) XÄ«nniÃ¡n kuÃ ilÃ¨!</p>
                    <p class="japanese-text">ï¼ˆã‚ãªãŸã«ï¼‰æ–°å¹´ãŠã‚ã§ã¨ã†ã”ã–ã„ã¾ã™ï¼</p>
                </div>
                <div class="quiz-section">
                    <h3>ãƒŸãƒ‹ç·´ç¿’</h3>
                    <div id="question-container-12" class="question-container"></div>
                    <div id="feedback-12" class="feedback hidden"></div>
                    <div id="success-animation-12" class="success-message hidden">ãŠç¥ã„ã®è¨€è‘‰ã‚‚è¨€ãˆã¾ã™ã­ï¼ğŸ¥³</div>
                    <button id="submit-12" class="quiz-button" onclick="submitQuiz(12)">å›ç­”ã™ã‚‹</button> 
                    <button id="retry-12" class="quiz-button quiz-button-secondary hidden" onclick="loadQuiz(12)">ã‚‚ã†ä¸€åº¦æŒ‘æˆ¦</button> 
                </div>
            </div>


        </div> <audio id="audio-player" style="display: none;"></audio>

    </div> <script>
        // --- State Variables ---
        let currentQuizState = {}; // Stores state for each quiz section

        // --- Quiz Data (Removed keys 1-4) ---
        const quizData = {
            // Kept original keys 5-12 to match content IDs and audio paths
            5: [ // æ•°å­—
                { type: 'multiple-choice', question: 'æ•°å­—ã€Œ17ã€ã®æ­£ã—ã„ä¸­å›½èªã¯ï¼Ÿ', options: ['åä¸ƒ', 'ä¸ƒå', 'ä¸€ä¸ƒ'], answer: 'åä¸ƒ' },
                { type: 'multiple-choice', question: 'æ•°å­—ã€Œ82ã€ã®æ­£ã—ã„ä¸­å›½èªã¯ï¼Ÿ', options: ['å…«åäºŒ', 'äºŒåå…«', 'å…«äºŒ'], answer: 'å…«åäºŒ' },
                { type: 'multiple-choice', question: 'ã€ŒsÄnshÃ­ã€ã®æ—¥æœ¬èªã®æ„å‘³ã¯ï¼Ÿ', options: ['30', '13', '3'], answer: '30' },
                { type: 'multiple-choice', question: 'ã€ŒliÃ¹shÃ­sÄnã€ã®æ—¥æœ¬èªã®æ„å‘³ã¯ï¼Ÿ', options: ['63', '36', '60'], answer: '63' },
            ],
            6: [ // æ›œæ—¥
                { type: 'multiple-choice', question: 'ã€ŒåœŸæ›œæ—¥ã€ã®æ­£ã—ã„ä¸­å›½èªã¯ï¼Ÿ', options: ['æ˜ŸæœŸå…­', 'æ˜ŸæœŸä¸ƒ', 'æ˜ŸæœŸå¤©'], answer: 'æ˜ŸæœŸå…­' },
                { type: 'multiple-choice', question: 'ã€Œæ˜ŸæœŸä¸‰ã€ã®æ—¥æœ¬èªã®æ„å‘³ã¯ï¼Ÿ', options: ['æ°´æ›œæ—¥', 'ç«æ›œæ—¥', 'æœ¨æ›œæ—¥'], answer: 'æ°´æ›œæ—¥' },
                { type: 'multiple-choice', question: 'ã€Œä½•æ›œæ—¥ï¼Ÿã€ã¨å°‹ã­ã‚‹ä¸­å›½èªã¯ï¼Ÿ', options: ['æ˜ŸæœŸå‡ ï¼Ÿ', 'æ˜ŸæœŸå¤©ï¼Ÿ', 'æ˜ŸæœŸä¸€ï¼Ÿ'], answer: 'æ˜ŸæœŸå‡ ï¼Ÿ' },
                 { type: 'multiple-choice', question: 'ã€Œæ—¥æ›œæ—¥ã€ã®ä¸­å›½èªã¯ï¼Ÿï¼ˆï¼’ã¤ã®è¨€ã„æ–¹ã®ã†ã¡ã®ä¸€ã¤ï¼‰', options: ['æ˜ŸæœŸå¤©', 'æ˜ŸæœŸä¸ƒ', 'æ˜ŸæœŸå…­'], answer: 'æ˜ŸæœŸå¤©' }
            ],
            7: [ // æœˆ
                { type: 'multiple-choice', question: 'ã€Œä¹æœˆã€ã®æ—¥æœ¬èªã®æ„å‘³ã¯ï¼Ÿ', options: ['9æœˆ', '7æœˆ', '10æœˆ'], answer: '9æœˆ' },
                { type: 'multiple-choice', question: 'ã€ŒshÃ­yÄ«yuÃ¨ã€ã®æ­£ã—ã„ä¸­å›½èªã¯ï¼Ÿ', options: ['åä¸€æœˆ', 'åæœˆ', 'åäºŒæœˆ'], answer: 'åä¸€æœˆ' },
                { type: 'multiple-choice', question: 'ã€ŒäºŒæœˆã€ã®æ—¥æœ¬èªã®æ„å‘³ã¯ï¼Ÿ', options: ['2æœˆ', '12æœˆ', '8æœˆ'], answer: '2æœˆ' },
                { type: 'multiple-choice', question: 'ã€ŒqÄ«yuÃ¨ã€ã®æ­£ã—ã„ä¸­å›½èªã¯ï¼Ÿ', options: ['ä¸ƒæœˆ', 'å…«æœˆ', 'å…­æœˆ'], answer: 'ä¸ƒæœˆ' },
            ],
            8: [ // æ—¥(å·)
                { type: 'multiple-choice', question: 'ã€Œä¸‰æœˆå…«å·ã€ã®æ—¥æœ¬èªã®æ„å‘³ã¯ï¼Ÿ', options: ['3æœˆ8æ—¥', '8æœˆ3æ—¥', '3æœˆ18æ—¥'], answer: '3æœˆ8æ—¥' },
                { type: 'multiple-choice', question: 'ã€Œ9æœˆ4æ—¥ã€ã®æ­£ã—ã„ä¸­å›½èªï¼ˆè©±ã—è¨€è‘‰ï¼‰ã¯ï¼Ÿ', options: ['ä¹æœˆå››å·', 'ä¹æœˆå››æ—¥', 'å››æœˆä¹å·'], answer: 'ä¹æœˆå››å·' },
                { type: 'multiple-choice', question: 'ã€Œä½•æœˆä½•æ—¥ï¼Ÿã€ã¨å°‹ã­ã‚‹ä¸­å›½èªã¯ï¼Ÿ', options: ['å‡ æœˆå‡ å·ï¼Ÿ', 'å‡ æœˆå‡ æ—¥ï¼Ÿ', 'åæœˆåå·ï¼Ÿ'], answer: 'å‡ æœˆå‡ å·ï¼Ÿ' },
                 { type: 'multiple-choice', question: 'ã€ŒshÃ­Ã¨ryuÃ¨ shÃ­hÃ oã€ã®æ—¥æœ¬èªã®æ„å‘³ã¯ï¼Ÿ', options: ['12æœˆ10æ—¥', '10æœˆ12æ—¥', '2æœˆ10æ—¥'], answer: '12æœˆ10æ—¥' },
            ],
            9: [ // å—
                { type: 'multiple-choice', question: 'æ–‡æœ«ã«ç½®ã„ã¦ã€Œï½ã§ã™ã‹ï¼Ÿã€ã¨ã„ã†ç–‘å•ã‚’è¡¨ã™åŠ©è©ã¯ï¼Ÿ', options: ['å—', 'å‘¢', 'å§'], answer: 'å—' },
                { type: 'multiple-choice', question: 'ã€Œä»Šæ—¥ã¯æ—¥æ›œæ—¥ã§ã™ã‹ã€‚ã€ã®æ­£ã—ã„ä¸­å›½èªã¯ï¼Ÿ', options: ['ä»Šå¤©æ˜¯æ˜ŸæœŸå¤©å—ï¼Ÿ', 'ä»Šå¤©æ˜¯æ˜ŸæœŸå¤©ã€‚', 'ä»Šå¤©æ˜ŸæœŸå¤©å—ï¼Ÿ'], answer: 'ä»Šå¤©æ˜¯æ˜ŸæœŸå¤©å—ï¼Ÿ' },
                 { type: 'multiple-choice', question: 'ã€Œä»Šå¤©æ˜¯11æœˆ12å·å—ï¼Ÿã€ã¨ã„ã†è³ªå•ã«å¯¾ã™ã‚‹å¦å®šã®ç­”ãˆã¯ï¼Ÿ', options: ['ä¸æ˜¯ï¼Œä»Šå¤©æ˜¯11æœˆ12å·ã€‚', 'æ˜¯ï¼Œä»Šå¤©æ˜¯11æœˆ12å·ã€‚', 'ä¸æ˜¯ï¼Œä»Šå¤©æ˜¯æ˜ŸæœŸå¤©ã€‚'], answer: 'ä¸æ˜¯ï¼Œä»Šå¤©æ˜¯11æœˆ13å·ã€‚' },
                 { type: 'multiple-choice', question: 'ã€Œæ˜¯ï¼Œä»Šå¤©æ˜¯æ˜ŸæœŸå¤©ã€‚ã€ã¯ã€ã©ã®è³ªå•ã«å¯¾ã™ã‚‹è‚¯å®šã®ç­”ãˆã§ã™ã‹ï¼Ÿ', options: ['ä»Šå¤©æ˜¯æ˜ŸæœŸå¤©å—ï¼Ÿ', 'ä»Šå¤©æ˜ŸæœŸå‡ ï¼Ÿ', 'ä»Šå¤©å‡ æœˆå‡ å·ï¼Ÿ'], answer: 'ä»Šå¤©æ˜¯æ˜ŸæœŸå¤©å—ï¼Ÿ' },
            ],
            10: [ // åè©è¿°èªæ–‡
                 { type: 'multiple-choice', question: 'ã€Œä»Šæ—¥ã¯æ°´æ›œæ—¥ã§ã™ã€‚ã€ã‚’åè©è¿°èªæ–‡ã§è¨€ã†ã¨ï¼Ÿ', options: ['ä»Šå¤©æ˜ŸæœŸä¸‰ã€‚', 'ä»Šå¤©æ˜¯æ˜ŸæœŸä¸‰ã€‚', 'æ˜ŸæœŸä¸‰ä»Šå¤©ã€‚'], answer: 'ä»Šå¤©æ˜ŸæœŸä¸‰ã€‚' },
                 { type: 'multiple-choice', question: 'ã€Œä»Šæ—¥ã¯ä½•æœˆä½•æ—¥ã§ã™ã‹ã€‚ã€ã®æ­£ã—ã„ä¸­å›½èªã¯ï¼Ÿ', options: ['ä»Šå¤©å‡ æœˆå‡ å·ï¼Ÿ', 'ä»Šå¤©ä¸æ˜¯å‡ æœˆå‡ å·ï¼Ÿ', 'å‡ æœˆå‡ å·ä»Šå¤©ï¼Ÿ'], answer: 'ä»Šå¤©å‡ æœˆå‡ å·ï¼Ÿ' },
                 { type: 'multiple-choice', question: 'åè©è¿°èªæ–‡ã§ã€å‹•è©ã€Œæ˜¯ã€ã¯é€šå¸¸ã©ã†ãªã‚Šã¾ã™ã‹ï¼Ÿ', options: ['çœç•¥ã•ã‚Œã‚‹', 'å¿…ãšä½¿ã†', 'æ–‡æœ«ã«ç½®ã'], answer: 'çœç•¥ã•ã‚Œã‚‹' },
                 { type: 'multiple-choice', question: 'ã€Œä»Šæ—¥ã¯9æœˆ10æ—¥ã§ã™ã€‚ã€ã‚’åè©è¿°èªæ–‡ã§è¨€ã†ã¨ï¼Ÿ', options: ['ä»Šå¤©9æœˆ10å·ã€‚', 'ä»Šå¤©æ˜¯9æœˆ10å·ã€‚', '9æœˆ10å·ä»Šå¤©ã€‚'], answer: 'ä»Šå¤©9æœˆ10å·ã€‚' },
            ],
            11: [ // çš„
                { type: 'multiple-choice', question: 'ã€Œç§ã®ãŠæ¯ã•ã‚“ã€ã‚’ä¸­å›½èªã§è¨€ã†å ´åˆã€â€œçš„â€ã¯ã©ã†ãªã‚‹ã“ã¨ãŒå¤šã„ã§ã™ã‹ï¼Ÿ', options: ['çœç•¥ã•ã‚Œã‚‹', 'å¿…ãšã¤ã‘ã‚‹', 'ã€Œæ˜¯ã€ã«å¤‰ã‚ã‚‹'], answer: 'çœç•¥ã•ã‚Œã‚‹' },
                { type: 'multiple-choice', question: 'ã€Œã“ã‚Œã¯ç§( )æœ¬ã§ã™ã€‚ã€ã®( )ã«å…¥ã‚‹ã®ã¯ï¼Ÿ (æœ¬ = ä¹¦ shÅ«)', options: ['çš„', 'æ˜¯', 'å—'], answer: 'çš„' },
                { type: 'multiple-choice', question: 'ã€Œçˆ±çŸ¥æ·‘å¾·å¤§å­¦( )å­¦ç”Ÿã€ã®( )ã«å…¥ã‚‹ã®ã¯ï¼Ÿ', options: ['çš„', 'æ˜¯', 'ä¸'], answer: 'çš„' },
                { type: 'multiple-choice', question: 'ã€Œæˆ‘å¦ˆå¦ˆ( )ç”Ÿæ—¥ã€ã®( )ã«å…¥ã‚‹ã®ã¯ï¼Ÿ', options: ['çš„', 'æ˜¯', 'å—'], answer: 'çš„' },
            ],
             12: [ // ç¥...å¿«ä¹
                { type: 'multiple-choice', question: 'ã€Œï¼ˆææ˜ã•ã‚“ï¼‰ãŠèª•ç”Ÿæ—¥ãŠã‚ã§ã¨ã†ï¼ã€ã®æ­£ã—ã„ä¸­å›½èªã¯ï¼Ÿ', options: ['ç”Ÿæ—¥å¿«ä¹ï¼', 'æ–°å¹´å¿«ä¹ï¼', 'ç¥å¿«ä¹ï¼'], answer: 'ç”Ÿæ—¥å¿«ä¹ï¼' },
                { type: 'multiple-choice', question: 'ã€Œæ–°å¹´ãŠã‚ã§ã¨ã†ã”ã–ã„ã¾ã™ï¼ã€ã®æ­£ã—ã„ä¸­å›½èªã¯ï¼Ÿ', options: ['æ–°å¹´å¿«ä¹ï¼', 'ç”Ÿæ—¥å¿«ä¹ï¼', 'ç¥ä½ å¿«ä¹ï¼'], answer: 'æ–°å¹´å¿«ä¹ï¼' },
                { type: 'multiple-choice', question: 'â€œç¥â€¦â€¦å¿«ä¹â€ã¯ä½•ã‚’è¡¨ã™è¡¨ç¾ã§ã™ã‹ï¼Ÿ', options: ['ãŠç¥ã„', 'æŒ¨æ‹¶', 'è¬ç½ª'], answer: 'ãŠç¥ã„' },
                 { type: 'multiple-choice', question: 'â€œç¥ä½ ç”Ÿæ—¥å¿«ä¹ï¼â€ã®ã€Œå¿«ä¹ã€ã®æ„å‘³ã¯ï¼Ÿ', options: ['æ¥½ã—ã„ã€ãƒãƒƒãƒ”ãƒ¼', 'èª•ç”Ÿæ—¥', 'æ–°å¹´'], answer: 'æ¥½ã—ã„ã€ãƒãƒƒãƒ”ãƒ¼' },
            ]
        };

        // --- DOM Elements ---
        const toc = document.getElementById('table-of-contents');
        const grammarSections = document.querySelectorAll('.grammar-section');
        const audioPlayer = document.getElementById('audio-player');

        // --- Functions ---

        // Function to show a specific section and hide others
        function showSection(sectionId) {
            if (sectionId !== 'table-of-contents') {
                toc.style.display = 'none';
            } else {
                 toc.style.display = 'block';
            }

            grammarSections.forEach(section => {
                if (section.id === sectionId) {
                    section.classList.remove('hidden');
                    section.classList.add('visible');
                    // Extract internal index (5-12) from sectionId
                    const grammarIndex = parseInt(sectionId.split('-')[1]);
                    // Check if grammarIndex is a valid number and exists in quizData
                    if (!isNaN(grammarIndex) && grammarIndex >= 5 && quizData[grammarIndex]) {
                         loadQuiz(grammarIndex); // Load quiz using internal index
                    } else if (!isNaN(grammarIndex) && grammarIndex >= 5 && !quizData[grammarIndex]) {
                         console.warn(`Quiz data for grammar index ${grammarIndex} not found.`);
                         const questionContainer = document.getElementById(`question-container-${grammarIndex}`);
                         if(questionContainer) questionContainer.innerHTML = '<p>ç·´ç¿’å•é¡Œã¯ã‚ã‚Šã¾ã›ã‚“ã€‚</p>';
                         // Hide controls if no quiz data
                         const submitButton = document.getElementById(`submit-${grammarIndex}`);
                         const retryButton = document.getElementById(`retry-${grammarIndex}`);
                         if(submitButton) submitButton.style.display = 'none';
                         if(retryButton) retryButton.style.display = 'none';
                    }
                } else {
                    section.classList.add('hidden');
                    section.classList.remove('visible');
                }
            });
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        // Function to play audio
        function playAudio(audioSrc) {
            if (!audioSrc) return;
            audioPlayer.src = audioSrc;
            audioPlayer.play().catch(error => {
                console.error("éŸ³å£°ãƒ•ã‚¡ã‚¤ãƒ«ã®å†ç”Ÿã«å¤±æ•—ã—ã¾ã—ãŸ:", audioSrc, error);
            });
        }

        // Function to shuffle an array (Fisher-Yates algorithm)
        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }

        // Function to load/reset a quiz section (Uses internal index 5-12)
        function loadQuiz(grammarIndex) {
            const feedbackContainer = document.getElementById(`feedback-${grammarIndex}`);
            const submitButton = document.getElementById(`submit-${grammarIndex}`);
            const retryButton = document.getElementById(`retry-${grammarIndex}`);
            const successAnimation = document.getElementById(`success-animation-${grammarIndex}`);
            const questionContainer = document.getElementById(`question-container-${grammarIndex}`);

             if (!questionContainer || !feedbackContainer || !submitButton || !retryButton || !successAnimation) {
                 console.error(`Quiz elements not found for grammar index ${grammarIndex}`);
                 return;
             }
             if (!quizData[grammarIndex] || quizData[grammarIndex].length === 0) {
                 questionContainer.innerHTML = '<p>åˆ©ç”¨å¯èƒ½ãªç·´ç¿’å•é¡Œã¯ã‚ã‚Šã¾ã›ã‚“ã€‚</p>';
                 feedbackContainer.classList.add('hidden');
                 successAnimation.classList.add('hidden');
                 submitButton.classList.add('hidden');
                 retryButton.classList.add('hidden');
                 return;
             }

            const allQuestions = shuffleArray([...quizData[grammarIndex]]);
            const selectedQuestions = allQuestions.slice(0, 2);

            currentQuizState[grammarIndex] = {
                questions: selectedQuestions,
                correctAnswers: selectedQuestions.map(q => q.answer),
                currentQuestionIndex: 0,
                totalQuestions: selectedQuestions.length,
                completed: false
            };

            feedbackContainer.innerHTML = '';
            feedbackContainer.classList.add('hidden');
            successAnimation.classList.add('hidden');
            submitButton.classList.remove('hidden');
            retryButton.classList.add('hidden');

            displayQuestion(grammarIndex, 0);
        }

        // Function to display a specific question (Uses internal index 5-12)
        function displayQuestion(grammarIndex, questionIndex) {
            const questionContainer = document.getElementById(`question-container-${grammarIndex}`);
            const state = currentQuizState[grammarIndex];

             if (!questionContainer || !state || questionIndex >= state.totalQuestions) {
                console.error("Error displaying question for index:", grammarIndex, questionIndex);
                return;
            }

            const q = state.questions[questionIndex];
            if (q.type !== 'multiple-choice') {
                 console.error("Error: Question type is not multiple-choice.", q);
                 questionContainer.innerHTML = '<p class="text-red-600">ã‚¨ãƒ©ãƒ¼ï¼šå•é¡Œå½¢å¼ãŒæ­£ã—ãã‚ã‚Šã¾ã›ã‚“ã€‚</p>';
                 return;
            }

            let quizHtml = `<div class="question">`;
            // Display renumbered question number (1-based for the current set)
            const displayQuestionNum = questionIndex + 1;
            quizHtml += `<p class="font-medium mb-1">è³ªå• ${displayQuestionNum} / ${state.totalQuestions}:</p>`;

            const instructionText = 'æ­£ã—ã„é¸æŠè‚¢ã‚’é¸ã‚“ã§ãã ã•ã„ã€‚';
            quizHtml += `<p class="question-instruction">${instructionText}</p>`;
            quizHtml += `<p class="mb-3">${q.question}</p>`;

            const shuffledOptions = shuffleArray([...q.options]);
            shuffledOptions.forEach((option, optionIndex) => {
                const isChineseOption = /[\u3000-\u9faf\uFF00-\uFFEF]/.test(option);
                const optionClass = isChineseOption ? 'chinese-text' : '';
                const radioId = `q-${grammarIndex}-${questionIndex}-${optionIndex}`;
                quizHtml += `<div class="choice-option ml-2">
                                <input type="radio" id="${radioId}" name="q-${grammarIndex}-${questionIndex}" value="${option}" data-question-index="${questionIndex}">
                                <label for="${radioId}" class="${optionClass}">${option}</label>
                             </div>`;
            });

            quizHtml += `</div>`;
            questionContainer.innerHTML = quizHtml;

            const feedbackContainer = document.getElementById(`feedback-${grammarIndex}`);
            feedbackContainer.innerHTML = '';
            feedbackContainer.classList.add('hidden');
        }


        // Function to submit the answer for the current question (Uses internal index 5-12)
        function submitQuiz(grammarIndex) {
            const state = currentQuizState[grammarIndex];
             if (!state || state.completed) return;

            const currentQuestionIndex = state.currentQuestionIndex;
             if (currentQuestionIndex >= state.questions.length) {
                 console.error("Invalid current question index:", currentQuestionIndex);
                 return;
             }
            const q = state.questions[currentQuestionIndex];
            const feedbackContainer = document.getElementById(`feedback-${grammarIndex}`);
            const submitButton = document.getElementById(`submit-${grammarIndex}`);
            const retryButton = document.getElementById(`retry-${grammarIndex}`);
            const successAnimation = document.getElementById(`success-animation-${grammarIndex}`);

             if (!feedbackContainer || !submitButton || !retryButton || !successAnimation) {
                 console.error(`Quiz feedback/control elements not found for grammar index ${grammarIndex}`);
                 return;
             }

            const checkedRadio = document.querySelector(`input[name="q-${grammarIndex}-${currentQuestionIndex}"]:checked`);
            const userAnswer = checkedRadio ? checkedRadio.value : '';

            if (!userAnswer) {
                 feedbackContainer.innerHTML = `<span class="font-semibold">é¸æŠè‚¢ã‚’é¸ã‚“ã§ãã ã•ã„ã€‚</span>`;
                 feedbackContainer.classList.remove('hidden', 'feedback-correct');
                 feedbackContainer.classList.add('feedback-incorrect');
                 return;
            }

            const isCorrect = userAnswer.toLowerCase() === q.answer.toLowerCase();

            feedbackContainer.classList.remove('hidden', 'feedback-correct', 'feedback-incorrect');
            if (isCorrect) {
                feedbackContainer.innerHTML = `<span class="font-semibold">æ­£è§£ï¼</span> ğŸ‘`;
                feedbackContainer.classList.add('feedback-correct');

                state.currentQuestionIndex++;
                if (state.currentQuestionIndex < state.totalQuestions) {
                     setTimeout(() => {
                         if(currentQuizState[grammarIndex] && !currentQuizState[grammarIndex].completed) {
                             displayQuestion(grammarIndex, state.currentQuestionIndex);
                             feedbackContainer.classList.add('hidden');
                         }
                     }, 1000);
                } else {
                    state.completed = true;
                    feedbackContainer.innerHTML = '';
                    feedbackContainer.classList.add('hidden');
                    successAnimation.classList.remove('hidden');
                    submitButton.classList.add('hidden');
                    retryButton.classList.remove('hidden');
                }
            } else {
                const correctAnswerClass = /[\u3000-\u9faf\uFF00-\uFFEF]/.test(q.answer) ? 'chinese-text' : '';
                feedbackContainer.innerHTML = `<span class="font-semibold">ä¸æ­£è§£...</span> æ­£è§£ã¯: <strong class="${correctAnswerClass}">${q.answer}</strong><br>ã‚‚ã†ä¸€åº¦é¸æŠã—ã¦ã€Œå›ç­”ã™ã‚‹ã€ã‚’æŠ¼ã—ã¦ãã ã•ã„ã€‚`;
                feedbackContainer.classList.add('feedback-incorrect');
            }
        }

        // --- Event Listeners ---
        document.addEventListener('click', function(event) {
            if (event.target.classList.contains('clickable-sentence') || event.target.classList.contains('clickable-item')) {
                const audioSrc = event.target.getAttribute('data-audio');
                playAudio(audioSrc);
            }
        });

        // --- Initial Setup ---
        document.addEventListener('DOMContentLoaded', () => {
           showSection('table-of-contents');
        });

    </script>

</body>
</html>
